/*! 
 Build based on gin-vue-admin 
 Time : 1675935707000 */
import{g as e,a,d as l,b as t,c as o,e as i,f as n,u as d}from"./appAlipayCertification.a0427aac.js";import{f as s,a as u,g as r}from"./format.a5b70b7c.js";import{r as c,a as p,b as m,o as v,c as y,d as g,e as f,w as b,h,t as C,z as w,F as _,x as k,m as V,A as T,i as I}from"./index.3b117381.js";import"./date.34b11046.js";import"./dictionary.c64483b9.js";import"./dictionary.2e4ec8e3.js";import"./sysDictionary.3083fcf3.js";const z={class:"gva-search-box"},x={class:"gva-table-box"},A={class:"gva-btn-list"},N=g("p",null,"确定要删除吗？",-1),D={style:{"text-align":"right","margin-top":"8px"}},j={class:"gva-pagination"},U={class:"dialog-footer"},q={name:"AppAlipayCertification"},B=Object.assign(q,{setup(q){const B=c([]),E=c([]),L=c({reqId:"",mercId:"",mercName:"",contactCorpId:"",contactsTel:"",idHolderType:"",idValidDateBegin:"",idValidDateEnd:"",busLincenceBegin:"",busLincenceEnd:"",merContactType:65,managementType:1,storeName:"",idTypeCd:"",sendChannelApplyNo:""}),S=p({mercId:[{required:!0,message:"",trigger:["input","blur"]}]}),F=c(),H=c(1),O=c(0),R=c(10),G=c([]),J=c({}),K=()=>{J.value={}},M=()=>{H.value=1,R.value=10,W()},P=e=>{R.value=e,W()},Q=e=>{H.value=e,W()},W=async()=>{const a=await e({page:H.value,pageSize:R.value,...J.value});0===a.code&&(G.value=a.data.list,O.value=a.data.total,H.value=a.data.page,R.value=a.data.pageSize)};W();(async()=>{B.value=await r("merContactType"),E.value=await r("managementType\t")})();const X=c([]),Y=e=>{X.value=e},Z=c(!1),$=async()=>{const e=[];if(0===X.value.length)return void I({type:"warning",message:"请选择要删除的数据"});X.value&&X.value.map((a=>{e.push(a.ID)}));0===(await l({ids:e})).code&&(I({type:"success",message:"删除成功"}),G.value.length===e.length&&H.value>1&&H.value--,Z.value=!1,W())},ee=c(""),ae=async e=>{0===(await i({ID:e.ID})).code&&(I({type:"success",message:"删除成功"}),1===G.value.length&&H.value>1&&H.value--,W())},le=c(!1),te=()=>{ee.value="create",le.value=!0},oe=()=>{le.value=!1,L.value={reqId:"",mercId:"",mercName:"",contactCorpId:"",contactsTel:"",idHolderType:"",idValidDateBegin:"",idValidDateEnd:"",busLincenceBegin:"",busLincenceEnd:"",merContactType:void 0,managementType:void 0,storeName:"",idTypeCd:""}},ie=async()=>{var e;null==(e=F.value)||e.validate((async e=>{if(!e)return;let a;switch(ee.value){case"create":default:a=await n(L.value);break;case"update":a=await d(L.value)}0===a.code&&(I({type:"success",message:"创建/更改成功"}),oe(),W())}))};return(e,l)=>{const i=m("el-date-picker"),n=m("el-form-item"),d=m("el-input"),r=m("el-button"),c=m("el-form"),p=m("el-popover"),q=m("el-table-column"),W=m("el-image"),ee=m("el-table"),ne=m("el-pagination"),de=m("el-option"),se=m("el-select"),ue=m("el-dialog");return v(),y("div",null,[g("div",z,[f(c,{inline:!0,model:J.value,class:"demo-form-inline"},{default:b((()=>[f(n,{label:"创建时间"},{default:b((()=>[f(i,{modelValue:J.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>J.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),h(" — "),f(i,{modelValue:J.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>J.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),f(n,{label:"商户号"},{default:b((()=>[f(d,{modelValue:J.value.mercId,"onUpdate:modelValue":l[2]||(l[2]=e=>J.value.mercId=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),f(n,null,{default:b((()=>[f(r,{size:"small",type:"primary",icon:"search",onClick:M},{default:b((()=>[h("查询")])),_:1}),f(r,{size:"small",icon:"refresh",onClick:K},{default:b((()=>[h("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),g("div",x,[g("div",A,[f(r,{size:"small",type:"primary",icon:"plus",onClick:te},{default:b((()=>[h("新增")])),_:1}),f(p,{visible:Z.value,"onUpdate:visible":l[5]||(l[5]=e=>Z.value=e),placement:"top",width:"160"},{reference:b((()=>[f(r,{icon:"delete",size:"small",style:{"margin-left":"10px"},disabled:!X.value.length,onClick:l[4]||(l[4]=e=>Z.value=!0)},{default:b((()=>[h("删除")])),_:1},8,["disabled"])])),default:b((()=>[N,g("div",D,[f(r,{size:"small",type:"primary",link:"",onClick:l[3]||(l[3]=e=>Z.value=!1)},{default:b((()=>[h("取消")])),_:1}),f(r,{size:"small",type:"primary",onClick:$},{default:b((()=>[h("确定")])),_:1})])])),_:1},8,["visible"])]),f(ee,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:G.value,"row-key":"ID",onSelectionChange:Y},{default:b((()=>[f(q,{align:"left",label:"日期",width:"180"},{default:b((e=>[h(C(w(s)(e.row.CreatedAt)),1)])),_:1}),f(q,{align:"left",label:"流水号",prop:"reqId",width:"120"}),f(q,{align:"left",label:"商户号",prop:"mercId",width:"120"}),f(q,{align:"left",label:"申请单号",prop:"sendChannelApplyNo",width:"150"}),f(q,{align:"left",prop:"qrcodeData",label:"小程序码",width:"180"},{default:b((e=>[f(W,{style:{width:"70%"},src:e.row.qrcodeData},null,8,["src"])])),_:1}),f(q,{align:"left",label:"联系人类型",prop:"merContactType",width:"120"},{default:b((e=>[h(C(w(u)(e.row.merContactType,B.value)),1)])),_:1}),f(q,{align:"left",label:"小微经营类型",prop:"managementType",width:"120"},{default:b((e=>[h(C(w(u)(e.row.managementType,E.value)),1)])),_:1}),f(q,{align:"left",label:"门店名称",prop:"storeName",width:"120"}),f(q,{align:"left",fixed:"right",label:"按钮组",width:"180"},{default:b((e=>[f(r,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:a=>(async e=>{const a=await t(e);0===a.code&&I({type:"success",message:a.msg})})(e.row)},{default:b((()=>[h("实名认证")])),_:2},1032,["onClick"]),f(r,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:a=>(async e=>{console.log("查询的数据",e);const a=await o({mercId:e.mercId,sendChannelApplyNo:e.sendChannelApplyNo});0===a.code&&I({type:"success",message:a.msg})})(e.row)},{default:b((()=>[h("状态查询")])),_:2},1032,["onClick"]),f(r,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{const l=await a({mercId:e.mercId});0===l.code&&I({type:"success",message:l.msg})})(e.row)},{default:b((()=>[h("授权状态")])),_:2},1032,["onClick"]),f(r,{type:"primary",link:"",icon:"delete",size:"small",onClick:a=>{return l=e.row,void T.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ae(l)}));var l}},{default:b((()=>[h("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),g("div",j,[f(ne,{layout:"total, sizes, prev, pager, next, jumper","current-page":H.value,"page-size":R.value,"page-sizes":[10,30,50,100],total:O.value,onCurrentChange:Q,onSizeChange:P},null,8,["current-page","page-size","total"])])]),f(ue,{modelValue:le.value,"onUpdate:modelValue":l[10]||(l[10]=e=>le.value=e),"before-close":oe,title:"弹窗操作"},{footer:b((()=>[g("div",U,[f(r,{size:"small",onClick:oe},{default:b((()=>[h("取 消")])),_:1}),f(r,{size:"small",type:"primary",onClick:ie},{default:b((()=>[h("确 定")])),_:1})])])),default:b((()=>[f(c,{model:L.value,"label-position":"right",ref_key:"elFormRef",ref:F,rules:S,"label-width":"120px"},{default:b((()=>[f(n,{label:"商户号:",prop:"mercId"},{default:b((()=>[f(d,{modelValue:L.value.mercId,"onUpdate:modelValue":l[6]||(l[6]=e=>L.value.mercId=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(n,{label:"联系人类型:",prop:"merContactType"},{default:b((()=>[f(se,{modelValue:L.value.merContactType,"onUpdate:modelValue":l[7]||(l[7]=e=>L.value.merContactType=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:b((()=>[(v(!0),y(_,null,k(B.value,((e,a)=>(v(),V(de,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(n,{label:"小微经营类型:",prop:"managementType"},{default:b((()=>[f(se,{modelValue:L.value.managementType,"onUpdate:modelValue":l[8]||(l[8]=e=>L.value.managementType=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:b((()=>[(v(!0),y(_,null,k(E.value,((e,a)=>(v(),V(de,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(n,{label:"门店名称:",prop:"storeName"},{default:b((()=>[f(d,{modelValue:L.value.storeName,"onUpdate:modelValue":l[9]||(l[9]=e=>L.value.storeName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{B as default};

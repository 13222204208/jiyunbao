/*! 
 Build based on gin-vue-admin 
 Time : 1677739392000 */
import{g as e,a,d as l,b as t,c as n,e as o,f as i,u as d}from"./appAlipayCertification.de55640b.js";import{f as s,a as u,g as r}from"./format.7121bf90.js";import{r as c,a as p,b as m,o as v,c as y,d as f,e as g,w as b,h,t as C,z as w,F as _,x as k,m as V,A as T,i as I}from"./index.533d8bbb.js";import"./date.34b11046.js";import"./dictionary.f9434c9f.js";import"./dictionary.a38b2399.js";import"./sysDictionary.dfe03bab.js";const z={class:"gva-search-box"},x={class:"gva-table-box"},A={class:"gva-btn-list"},N=f("p",null,"确定要删除吗？",-1),D={style:{"text-align":"right","margin-top":"8px"}},j=f("br",null,null,-1),U={class:"gva-pagination"},q={class:"dialog-footer"},B={name:"AppAlipayCertification"},E=Object.assign(B,{setup(B){const E=c([]),L=c([]),S=c({reqId:"",mercId:"",mercName:"",contactCorpId:"",contactsTel:"",idHolderType:"",idValidDateBegin:"",idValidDateEnd:"",busLincenceBegin:"",busLincenceEnd:"",merContactType:65,managementType:1,storeName:"",idTypeCd:"",sendChannelApplyNo:""}),F=p({mercId:[{required:!0,message:"",trigger:["input","blur"]}]}),H=c(),O=c(1),R=c(0),G=c(10),J=c([]),K=c({}),M=()=>{K.value={}},P=()=>{O.value=1,G.value=10,X()},Q=e=>{G.value=e,X()},W=e=>{O.value=e,X()},X=async()=>{const a=await e({page:O.value,pageSize:G.value,...K.value});0===a.code&&(J.value=a.data.list,R.value=a.data.total,O.value=a.data.page,G.value=a.data.pageSize)};X();(async()=>{E.value=await r("merContactType"),L.value=await r("managementType\t")})();const Y=c([]),Z=e=>{Y.value=e},$=c(!1),ee=async()=>{const e=[];if(0===Y.value.length)return void I({type:"warning",message:"请选择要删除的数据"});Y.value&&Y.value.map((a=>{e.push(a.ID)}));0===(await l({ids:e})).code&&(I({type:"success",message:"删除成功"}),J.value.length===e.length&&O.value>1&&O.value--,$.value=!1,X())},ae=c(""),le=async e=>{0===(await o({ID:e.ID})).code&&(I({type:"success",message:"删除成功"}),1===J.value.length&&O.value>1&&O.value--,X())},te=c(!1),ne=()=>{ae.value="create",te.value=!0},oe=()=>{te.value=!1,S.value={reqId:"",mercId:"",mercName:"",contactCorpId:"",contactsTel:"",idHolderType:"",idValidDateBegin:"",idValidDateEnd:"",busLincenceBegin:"",busLincenceEnd:"",merContactType:void 0,managementType:void 0,storeName:"",idTypeCd:""}},ie=async()=>{var e;null==(e=H.value)||e.validate((async e=>{if(!e)return;let a;switch(ae.value){case"create":default:a=await i(S.value);break;case"update":a=await d(S.value)}0===a.code&&(I({type:"success",message:"创建/更改成功"}),oe(),X())}))};return(e,l)=>{const o=m("el-date-picker"),i=m("el-form-item"),d=m("el-input"),r=m("el-button"),c=m("el-form"),p=m("el-popover"),B=m("el-table-column"),X=m("el-image"),ae=m("el-table"),de=m("el-pagination"),se=m("el-option"),ue=m("el-select"),re=m("el-dialog");return v(),y("div",null,[f("div",z,[g(c,{inline:!0,model:K.value,class:"demo-form-inline"},{default:b((()=>[g(i,{label:"创建时间"},{default:b((()=>[g(o,{modelValue:K.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>K.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),h(" — "),g(o,{modelValue:K.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>K.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),g(i,{label:"商户号"},{default:b((()=>[g(d,{modelValue:K.value.mercId,"onUpdate:modelValue":l[2]||(l[2]=e=>K.value.mercId=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),g(i,null,{default:b((()=>[g(r,{size:"small",type:"primary",icon:"search",onClick:P},{default:b((()=>[h("查询")])),_:1}),g(r,{size:"small",icon:"refresh",onClick:M},{default:b((()=>[h("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),f("div",x,[f("div",A,[g(r,{size:"small",type:"primary",icon:"plus",onClick:ne},{default:b((()=>[h("新增")])),_:1}),g(p,{visible:$.value,"onUpdate:visible":l[5]||(l[5]=e=>$.value=e),placement:"top",width:"160"},{reference:b((()=>[g(r,{icon:"delete",size:"small",style:{"margin-left":"10px"},disabled:!Y.value.length,onClick:l[4]||(l[4]=e=>$.value=!0)},{default:b((()=>[h("删除")])),_:1},8,["disabled"])])),default:b((()=>[N,f("div",D,[g(r,{size:"small",type:"primary",link:"",onClick:l[3]||(l[3]=e=>$.value=!1)},{default:b((()=>[h("取消")])),_:1}),g(r,{size:"small",type:"primary",onClick:ee},{default:b((()=>[h("确定")])),_:1})])])),_:1},8,["visible"])]),g(ae,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:J.value,"row-key":"ID",onSelectionChange:Z},{default:b((()=>[g(B,{align:"left",label:"日期",width:"180"},{default:b((e=>[h(C(w(s)(e.row.CreatedAt)),1)])),_:1}),g(B,{align:"left",label:"流水号",prop:"reqId",width:"120"}),g(B,{align:"left",label:"商户号",prop:"mercId",width:"120"}),g(B,{align:"left",label:"申请单号",prop:"sendChannelApplyNo",width:"150"}),g(B,{align:"left",prop:"qrcodeData",label:"小程序码",width:"180"},{default:b((e=>[g(X,{style:{width:"70%"},src:e.row.qrcodeData},null,8,["src"])])),_:1}),g(B,{align:"left",label:"联系人类型",prop:"merContactType",width:"120"},{default:b((e=>[h(C(w(u)(e.row.merContactType,E.value)),1)])),_:1}),g(B,{align:"left",label:"小微经营类型",prop:"managementType",width:"120"},{default:b((e=>[h(C(w(u)(e.row.managementType,L.value)),1)])),_:1}),g(B,{align:"left",label:"门店名称",prop:"storeName",width:"120"}),g(B,{align:"left",fixed:"right",label:"按钮组",width:"180"},{default:b((e=>[g(r,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:a=>(async e=>{const a=await t(e);0===a.code&&I({type:"success",message:a.msg})})(e.row)},{default:b((()=>[h("实名认证")])),_:2},1032,["onClick"]),g(r,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:a=>(async e=>{console.log("查询的数据",e);const a=await n({mercId:e.mercId,sendChannelApplyNo:e.sendChannelApplyNo});0===a.code&&I({type:"success",message:a.msg})})(e.row)},{default:b((()=>[h("状态查询")])),_:2},1032,["onClick"]),j,g(r,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{const l=await a({mercId:e.mercId});0===l.code&&I({type:"success",message:l.msg})})(e.row)},{default:b((()=>[h("授权状态")])),_:2},1032,["onClick"]),g(r,{type:"primary",link:"",icon:"delete",size:"small",onClick:a=>{return l=e.row,void T.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{le(l)}));var l}},{default:b((()=>[h("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),f("div",U,[g(de,{layout:"total, sizes, prev, pager, next, jumper","current-page":O.value,"page-size":G.value,"page-sizes":[10,30,50,100],total:R.value,onCurrentChange:W,onSizeChange:Q},null,8,["current-page","page-size","total"])])]),g(re,{modelValue:te.value,"onUpdate:modelValue":l[10]||(l[10]=e=>te.value=e),"before-close":oe,title:"弹窗操作"},{footer:b((()=>[f("div",q,[g(r,{size:"small",onClick:oe},{default:b((()=>[h("取 消")])),_:1}),g(r,{size:"small",type:"primary",onClick:ie},{default:b((()=>[h("确 定")])),_:1})])])),default:b((()=>[g(c,{model:S.value,"label-position":"right",ref_key:"elFormRef",ref:H,rules:F,"label-width":"120px"},{default:b((()=>[g(i,{label:"商户号:",prop:"mercId"},{default:b((()=>[g(d,{modelValue:S.value.mercId,"onUpdate:modelValue":l[6]||(l[6]=e=>S.value.mercId=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),g(i,{label:"联系人类型:",prop:"merContactType"},{default:b((()=>[g(ue,{modelValue:S.value.merContactType,"onUpdate:modelValue":l[7]||(l[7]=e=>S.value.merContactType=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:b((()=>[(v(!0),y(_,null,k(E.value,((e,a)=>(v(),V(se,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),g(i,{label:"小微经营类型:",prop:"managementType"},{default:b((()=>[g(ue,{modelValue:S.value.managementType,"onUpdate:modelValue":l[8]||(l[8]=e=>S.value.managementType=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:b((()=>[(v(!0),y(_,null,k(L.value,((e,a)=>(v(),V(se,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),g(i,{label:"门店名称:",prop:"storeName"},{default:b((()=>[g(d,{modelValue:S.value.storeName,"onUpdate:modelValue":l[9]||(l[9]=e=>S.value.storeName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{E as default};

/*! 
 Build based on gin-vue-admin 
 Time : 1670837959000 */
import{g as e,d as l,a,c as t,b as o,q as r,f as u,e as d,h as i,u as c}from"./appCustInfo.6fcc7e99.js";import{f as p,a as n,g as s}from"./format.215352f7.js";import{z as m,u as b,r as g,a as v,b as f,o as y,c as C,d as h,e as V,w as _,h as w,F as k,x as N,m as A,t as U,A as q,B as T,C as I,i as M}from"./index.42b7f490.js";import"./date.34b11046.js";import"./dictionary.528e6e48.js";import"./dictionary.3462a5b2.js";import"./sysDictionary.e268ed4c.js";const z={class:"gva-search-box"},x={class:"gva-table-box"},B={class:"gva-btn-list"},S=h("p",null,"确定要删除吗？",-1),P={style:{"text-align":"right","margin-top":"8px"}},j={class:"gva-pagination"},D={class:"dialog-footer"},E={class:"dialog-footer"},F={name:"AppCustInfo"},R=Object.assign(F,{setup(F){const R=m("reload"),L=b(),O=g([]),G=g([]),H=g({cityCode:"",openBankName:""}),J=g({uid:0,reqId:"",certId:"",agtMercId:"",mercName:"",mercShortName:"",mercType:void 0,mccCd:"",contactMail:"",contactMan:"",contactPhone:"",cusMgrNm:"",notifyUrl:"",crpCertNo:"",openCertNo:"",crpCertType:"00",certBgn:"",certExpire:"",crpNm:"",crpPhone:"",stlAccNo:"",bankSubCode:"",stlAccType:void 0,busProviceCode:"",busCityCode:"",busAreaCode:"",busAddr:""}),K=v({cityCode:[{required:!0,message:"",trigger:["input","blur"]}],openBankName:[{required:!0,message:"",trigger:["input","blur"]}]}),Q=v({mercName:[{required:!0,message:"",trigger:["input","blur"]}],mercType:[{required:!0,message:"",trigger:["input","blur"]}],mccCd:[{required:!0,message:"",trigger:["input","blur"]}],contactMail:[{required:!0,message:"",trigger:["input","blur"]}],cusMgrNm:[{required:!0,message:"",trigger:["input","blur"]}],notifyUrl:[{required:!0,message:"",trigger:["input","blur"]}],crpCertNo:[{required:!0,message:"",trigger:["input","blur"]}],crpCertType:[{required:!0,message:"",trigger:["input","blur"]}],certBgn:[{required:!0,message:"",trigger:["input","blur"]}],certExpire:[{required:!0,message:"",trigger:["input","blur"]}],crpNm:[{required:!0,message:"",trigger:["input","blur"]}],crpPhone:[{required:!0,message:"",trigger:["input","blur"]}],stlAccNo:[{required:!0,message:"",trigger:["input","blur"]}],bankSubCode:[{required:!0,message:"",trigger:["input","blur"]}],stlAccType:[{required:!0,message:"",trigger:["input","blur"]}],busProviceCode:[{required:!0,message:"",trigger:["input","blur"]}],busCityCode:[{required:!0,message:"",trigger:["input","blur"]}],busAddr:[{required:!0,message:"",trigger:["input","blur"]}]}),W=g(),X=g(1),Y=g(0),Z=g(10),$=g([]),ee=g({}),le=()=>{ee.value={}},ae=()=>{X.value=1,Z.value=10,re()},te=e=>{Z.value=e,re()},oe=e=>{X.value=e,re()},re=async()=>{const l=await e({page:X.value,pageSize:Z.value,...ee.value});0===l.code&&($.value=l.data.list,Y.value=l.data.total,X.value=l.data.page,Z.value=l.data.pageSize)};re();(async()=>{O.value=await s("mercType"),G.value=await s("stlAccType")})();const ue=g(!1),de=g([]),ie=e=>{de.value=e},ce=g(!1),pe=async()=>{const e=[];if(0===de.value.length)return void M({type:"warning",message:"请选择要删除的数据"});de.value&&de.value.map((l=>{e.push(l.ID)}));0===(await l({ids:e})).code&&(M({type:"success",message:"删除成功"}),$.value.length===e.length&&X.value>1&&X.value--,ce.value=!1,re())},ne=g(""),se=()=>{""!=H.value.cityCode?""!=H.value.openBankName?window.open("https://jiyunbao.vvv5g.com/sdk/request/findBankNameAndBankCode.php?cityCode="+H.value.cityCode+"&openBankName="+H.value.openBankName,"_blank"):M({type:"warning",message:"请填写银行名称"}):M({type:"warning",message:"请填写地区编码"})},me=()=>{let e=J.value.mercType;console.log("类型值 ",e),e=3==e?1:4==e?2:3,window.open("https://jiyunbao.vvv5g.com/sdk/request/queryMccList.php?merc_type="+e,"_blank")},be=async e=>{0===(await d({ID:e.ID})).code&&(M({type:"success",message:"删除成功"}),1===$.value.length&&X.value>1&&X.value--,re())},ge=g(!1),ve=()=>{ne.value="create",ge.value=!0},fe=()=>{ge.value=!1,J.value={uid:0,reqId:"",certId:"",agtMercId:"",mercName:"",mercShortName:"",mercType:void 0,mccCd:"",contactMail:"",contactMan:"",contactPhone:"",cusMgrNm:"",notifyUrl:"",crpCertNo:"",openCertNo:"",crpCertType:"",certBgn:"",certExpire:"",crpNm:"",crpPhone:"",stlAccNo:"",bankSubCode:"",stlAccType:void 0,busProviceCode:"",busCityCode:"",busAreaCode:"",busAddr:""}},ye=async()=>{var e;null==(e=W.value)||e.validate((async e=>{if(!e)return;let l;switch(ne.value){case"create":default:l=await i(J.value);break;case"update":l=await c(J.value)}0===l.code&&(M({type:"success",message:"创建/更改成功"}),fe(),re())}))};return(e,l)=>{const d=f("el-date-picker"),i=f("el-form-item"),c=f("el-input"),s=f("el-option"),m=f("el-select"),b=f("el-button"),g=f("el-form"),v=f("el-popover"),F=f("el-table-column"),re=f("el-table"),Ce=f("el-pagination"),he=f("router-link"),Ve=f("el-dialog");return y(),C("div",null,[h("div",z,[V(g,{inline:!0,model:ee.value,class:"demo-form-inline"},{default:_((()=>[V(i,{label:"创建时间"},{default:_((()=>[V(d,{modelValue:ee.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>ee.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),w(" — "),V(d,{modelValue:ee.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>ee.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),V(i,{label:"流水号"},{default:_((()=>[V(c,{modelValue:ee.value.reqId,"onUpdate:modelValue":l[2]||(l[2]=e=>ee.value.reqId=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),V(i,{label:"商户名称"},{default:_((()=>[V(c,{modelValue:ee.value.mercName,"onUpdate:modelValue":l[3]||(l[3]=e=>ee.value.mercName=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),V(i,{label:"商户类型",prop:"mercType"},{default:_((()=>[V(m,{modelValue:ee.value.mercType,"onUpdate:modelValue":l[4]||(l[4]=e=>ee.value.mercType=e),clearable:"",placeholder:"请选择",onClear:l[5]||(l[5]=()=>{ee.value.mercType=void 0})},{default:_((()=>[(y(!0),C(k,null,N(O.value,((e,l)=>(y(),A(s,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),V(i,null,{default:_((()=>[V(b,{size:"small",type:"primary",icon:"search",onClick:ae},{default:_((()=>[w("查询")])),_:1}),V(b,{size:"small",icon:"refresh",onClick:le},{default:_((()=>[w("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),h("div",x,[h("div",B,[V(b,{size:"small",type:"primary",icon:"plus",onClick:ve},{default:_((()=>[w("新增")])),_:1}),V(v,{visible:ce.value,"onUpdate:visible":l[8]||(l[8]=e=>ce.value=e),placement:"top",width:"160"},{reference:_((()=>[V(b,{icon:"delete",size:"small",style:{"margin-left":"10px"},disabled:!de.value.length,onClick:l[7]||(l[7]=e=>ce.value=!0)},{default:_((()=>[w("删除")])),_:1},8,["disabled"])])),default:_((()=>[S,h("div",P,[V(b,{size:"small",type:"primary",link:"",onClick:l[6]||(l[6]=e=>ce.value=!1)},{default:_((()=>[w("取消")])),_:1}),V(b,{size:"small",type:"primary",onClick:pe},{default:_((()=>[w("确定")])),_:1})])])),_:1},8,["visible"])]),V(re,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:$.value,"row-key":"ID",onSelectionChange:ie},{default:_((()=>[V(F,{align:"left",label:"日期",width:"180"},{default:_((e=>[w(U(q(p)(e.row.CreatedAt)),1)])),_:1}),V(F,{align:"left",label:"商户ID",prop:"uid",width:"80"}),V(F,{align:"left",label:"客户号",prop:"custId",width:"160"}),V(F,{align:"left",label:"流水号",prop:"reqId",width:"180"}),V(F,{align:"left",label:"发起方商户号",prop:"certId",width:"120"}),V(F,{align:"left",label:"代理商编号",prop:"agtMercId",width:"120"}),V(F,{align:"left",label:"商户名称",prop:"mercName",width:"120"}),V(F,{align:"left",label:"商户简称",prop:"mercShortName",width:"120"}),V(F,{align:"left",label:"商户类型",prop:"mercType",width:"120"},{default:_((e=>[w(U(q(n)(e.row.mercType,O.value)),1)])),_:1}),V(F,{align:"left",label:"mcc码",prop:"mccCd",width:"120"}),V(F,{align:"left",label:"联系人邮箱",prop:"contactMail",width:"120"}),V(F,{align:"left",label:"客户经理",prop:"cusMgrNm",width:"120"}),V(F,{align:"left",label:"异步通知地址",prop:"notifyUrl",width:"120"}),V(F,{align:"left",label:"法人证件号",prop:"crpCertNo",width:"120"}),V(F,{align:"left",label:"法人证件类型",prop:"crpCertType",width:"120"}),V(F,{align:"left",label:"证件开始日期",prop:"certBgn",width:"120"}),V(F,{align:"left",label:"证件有效期",prop:"certExpire",width:"120"}),V(F,{align:"left",label:"法人姓名",prop:"crpNm",width:"120"}),V(F,{align:"left",label:"法人手机号",prop:"crpPhone",width:"120"}),V(F,{align:"left",label:"结算账号",prop:"stlAccNo",width:"120"}),V(F,{align:"left",label:"开户支行联行号",prop:"bankSubCode",width:"120"}),V(F,{align:"left",label:"结算账户类型",prop:"stlAccType",width:"120"},{default:_((e=>[w(U(q(n)(e.row.stlAccType,G.value)),1)])),_:1}),V(F,{align:"left",label:"营业归属省代码",prop:"busProviceCode",width:"120"}),V(F,{align:"left",label:"营业归属市代码",prop:"busCityCode",width:"120"}),V(F,{align:"left",label:"营业详细地址",prop:"busAddr",width:"120"}),V(F,{fixed:"right",align:"left",label:"操作",width:"220"},{default:_((e=>[V(b,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{let l=await a(e);console.log("结果确认",l),0===l.code&&M({type:"success",message:l.msg}),R()})(e.row)},{default:_((()=>[w("资料上送")])),_:2},1032,["onClick"]),V(b,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{const l=await u({ID:e.ID});ne.value="update",0===l.code&&(J.value=l.data.reappCustInfo,ge.value=!0)})(e.row)},{default:_((()=>[w("资料修改")])),_:2},1032,["onClick"]),V(b,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>{return a=e.row,console.log("图片上送",a),void L.push({name:"appUploadImg",query:{id:a.ID}});var a}},{default:_((()=>[w("图片上送")])),_:2},1032,["onClick"]),V(b,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{let l=await o(e);console.log("结果确认",l),0===l.code&&M({type:"success",message:"创建/更改成功"}),R()})(e.row)},{default:_((()=>[w("资料确认")])),_:2},1032,["onClick"]),V(b,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{const l=await r(e);console.log("结果确认",l.code),0===l.code&&M({type:"success",message:l.msg})})(e.row)},{default:_((()=>[w("状态查询")])),_:2},1032,["onClick"]),V(b,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{let l=await t({custId:e.custId});console.log("结果确认",l),0===l.code&&M({type:"success",message:l.msg})})(e.row)},{default:_((()=>[w("变更申请")])),_:2},1032,["onClick"]),V(b,{type:"primary",link:"",icon:"delete",size:"small",onClick:l=>{return a=e.row,void I.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{be(a)}));var a}},{default:_((()=>[w("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),h("div",j,[V(Ce,{layout:"total, sizes, prev, pager, next, jumper","current-page":X.value,"page-size":Z.value,"page-sizes":[10,30,50,100],total:Y.value,onCurrentChange:oe,onSizeChange:te},null,8,["current-page","page-size","total"])])]),V(Ve,{modelValue:ue.value,"onUpdate:modelValue":l[12]||(l[12]=e=>ue.value=e),title:"查询行号",width:"30%"},{footer:_((()=>[h("span",D,[V(b,{onClick:l[11]||(l[11]=e=>ue.value=!1)},{default:_((()=>[w("取消")])),_:1}),V(b,{type:"primary",onClick:se},{default:_((()=>[w(" 查询 ")])),_:1})])])),default:_((()=>[V(g,{model:H.value,"label-position":"right",ref_key:"elFormRef",ref:W,rules:K,"label-width":"100px"},{default:_((()=>[V(i,{label:"地区编码:",prop:"cityCode\t"},{default:_((()=>[V(c,{modelValue:H.value.cityCode,"onUpdate:modelValue":l[9]||(l[9]=e=>H.value.cityCode=e),clearable:!0,placeholder:"请输入地区编码比如 1000"},{append:_((()=>[V(b,{icon:q(T)},{default:_((()=>[V(he,{target:"_blank",to:{path:"/layout/set/appAreaInfo"}},{default:_((()=>[w("编码查询")])),_:1})])),_:1},8,["icon"])])),_:1},8,["modelValue"])])),_:1}),V(i,{label:"银行名称:",prop:"openBankName"},{default:_((()=>[V(c,{modelValue:H.value.openBankName,"onUpdate:modelValue":l[10]||(l[10]=e=>H.value.openBankName=e),clearable:!0,placeholder:"请输入银行名称"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),V(Ve,{modelValue:ge.value,"onUpdate:modelValue":l[32]||(l[32]=e=>ge.value=e),"before-close":fe,title:"弹窗操作"},{footer:_((()=>[h("div",E,[V(b,{size:"small",onClick:fe},{default:_((()=>[w("取 消")])),_:1}),V(b,{size:"small",type:"primary",onClick:ye},{default:_((()=>[w("确 定")])),_:1})])])),default:_((()=>[V(g,{model:J.value,"label-position":"right",ref_key:"elFormRef",ref:W,rules:Q,"label-width":"150px"},{default:_((()=>[V(i,{label:"商户名称:",prop:"mercName"},{default:_((()=>[V(c,{modelValue:J.value.mercName,"onUpdate:modelValue":l[13]||(l[13]=e=>J.value.mercName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),V(i,{label:"商户简称:",prop:"mercShortName"},{default:_((()=>[V(c,{modelValue:J.value.mercShortName,"onUpdate:modelValue":l[14]||(l[14]=e=>J.value.mercShortName=e),clearable:!0,placeholder:"若商户名称长度超过20,商户简称必传"},null,8,["modelValue"])])),_:1}),V(i,{label:"商户类型:",prop:"mercType"},{default:_((()=>[V(m,{modelValue:J.value.mercType,"onUpdate:modelValue":l[15]||(l[15]=e=>J.value.mercType=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:_((()=>[(y(!0),C(k,null,N(O.value,((e,l)=>(y(),A(s,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),V(i,{label:"mcc码:",prop:"mccCd"},{default:_((()=>[V(c,{modelValue:J.value.mccCd,"onUpdate:modelValue":l[16]||(l[16]=e=>J.value.mccCd=e),clearable:!0,placeholder:"请输入",width:"500"},{append:_((()=>[V(b,{icon:q(T),onClick:me},{default:_((()=>[w("MCC码查询")])),_:1},8,["icon"])])),_:1},8,["modelValue"])])),_:1}),V(i,{label:"联系人邮箱:",prop:"contactMail"},{default:_((()=>[V(c,{modelValue:J.value.contactMail,"onUpdate:modelValue":l[17]||(l[17]=e=>J.value.contactMail=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),V(i,{label:"客户经理:",prop:"cusMgrNm"},{default:_((()=>[V(c,{modelValue:J.value.cusMgrNm,"onUpdate:modelValue":l[18]||(l[18]=e=>J.value.cusMgrNm=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),V(i,{label:"法人证件号:",prop:"crpCertNo"},{default:_((()=>[V(c,{modelValue:J.value.crpCertNo,"onUpdate:modelValue":l[19]||(l[19]=e=>J.value.crpCertNo=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),V(i,{label:"证件开始日期:",prop:"certBgn"},{default:_((()=>[V(c,{modelValue:J.value.certBgn,"onUpdate:modelValue":l[20]||(l[20]=e=>J.value.certBgn=e),clearable:!0,placeholder:"证件开始日期yyyyMMdd"},null,8,["modelValue"])])),_:1}),V(i,{label:"证件有效期:",prop:"certExpire"},{default:_((()=>[V(c,{modelValue:J.value.certExpire,"onUpdate:modelValue":l[21]||(l[21]=e=>J.value.certExpire=e),clearable:!0,placeholder:"日期格式yyyyMMdd ，如果为长期或者永久，请填值“29991231”"},null,8,["modelValue"])])),_:1}),V(i,{label:"法人姓名:",prop:"crpNm"},{default:_((()=>[V(c,{modelValue:J.value.crpNm,"onUpdate:modelValue":l[22]||(l[22]=e=>J.value.crpNm=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),V(i,{label:"法人手机号:",prop:"crpPhone"},{default:_((()=>[V(c,{modelValue:J.value.crpPhone,"onUpdate:modelValue":l[23]||(l[23]=e=>J.value.crpPhone=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),V(i,{label:"结算账号:",prop:"stlAccNo"},{default:_((()=>[V(c,{modelValue:J.value.stlAccNo,"onUpdate:modelValue":l[24]||(l[24]=e=>J.value.stlAccNo=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),V(i,{label:"开户支行联行号:",prop:"bankSubCode"},{default:_((()=>[V(c,{modelValue:J.value.bankSubCode,"onUpdate:modelValue":l[26]||(l[26]=e=>J.value.bankSubCode=e),clearable:!0,placeholder:"请输入"},{append:_((()=>[V(b,{icon:q(T),text:"",onClick:l[25]||(l[25]=e=>ue.value=!0)},{default:_((()=>[w("行号查询")])),_:1},8,["icon"])])),_:1},8,["modelValue"])])),_:1}),V(i,{label:"结算账户类型:",prop:"stlAccType"},{default:_((()=>[V(m,{modelValue:J.value.stlAccType,"onUpdate:modelValue":l[27]||(l[27]=e=>J.value.stlAccType=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:_((()=>[(y(!0),C(k,null,N(G.value,((e,l)=>(y(),A(s,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),V(i,{label:"营业归属省代码:",prop:"busProviceCode"},{default:_((()=>[V(c,{modelValue:J.value.busProviceCode,"onUpdate:modelValue":l[28]||(l[28]=e=>J.value.busProviceCode=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),V(i,{label:"营业归属市代码:",prop:"busCityCode"},{default:_((()=>[V(c,{modelValue:J.value.busCityCode,"onUpdate:modelValue":l[29]||(l[29]=e=>J.value.busCityCode=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),V(i,{label:"营业归属区(县)代码:",prop:"busAreaCode"},{default:_((()=>[V(c,{modelValue:J.value.busAreaCode,"onUpdate:modelValue":l[30]||(l[30]=e=>J.value.busAreaCode=e),clearable:!0,placeholder:"城市下有区(县必填)，城市下无区(县)则不上送"},null,8,["modelValue"])])),_:1}),V(i,{label:"营业详细地址:",prop:"busAddr"},{default:_((()=>[V(c,{modelValue:J.value.busAddr,"onUpdate:modelValue":l[31]||(l[31]=e=>J.value.busAddr=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{R as default};

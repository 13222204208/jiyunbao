/*! 
 Build based on gin-vue-admin 
 Time : 1670837959000 */
import{g as e,d as l,f as a,a as t,c as u,u as i}from"./appFacilitatingAgency.de589d92.js";import{f as o,a as d,g as r}from"./format.215352f7.js";import{r as n,a as s,b as p,o as c,c as m,d as v,e as f,w as g,h as b,t as h,A as y,F as w,x as V,m as _,C as k,i as C}from"./index.42b7f490.js";import"./date.34b11046.js";import"./dictionary.528e6e48.js";import"./dictionary.3462a5b2.js";import"./sysDictionary.e268ed4c.js";const z={class:"gva-search-box"},U={class:"gva-table-box"},x={class:"gva-btn-list"},A=v("p",null,"确定要删除吗？",-1),j={style:{"text-align":"right","margin-top":"8px"}},D={class:"gva-pagination"},q={class:"dialog-footer"},I={name:"AppFacilitatingAgency"},F=Object.assign(I,{setup(I){const F=n([]),S=n([]),T=n([]),B=n({phone:"",name:"",way:void 0,principal:"",card:"",mail:"",area:"",address:"",status:void 0,certification:void 0}),O=s({phone:[{required:!0,message:"",trigger:["input","blur"]}],name:[{required:!0,message:"",trigger:["input","blur"]}],way:[{required:!0,message:"",trigger:["input","blur"]}],principal:[{required:!0,message:"",trigger:["input","blur"]}],status:[{required:!0,message:"",trigger:["input","blur"]}],certification:[{required:!0,message:"",trigger:["input","blur"]}]}),R=n(),E=n(1),G=n(0),H=n(10),J=n([]),K=n({}),L=()=>{K.value={}},M=()=>{E.value=1,H.value=10,Q()},N=e=>{H.value=e,Q()},P=e=>{E.value=e,Q()},Q=async()=>{const l=await e({page:E.value,pageSize:H.value,...K.value});0===l.code&&(J.value=l.data.list,G.value=l.data.total,E.value=l.data.page,H.value=l.data.pageSize)};Q();(async()=>{F.value=await r("mchType"),S.value=await r("serviceState"),T.value=await r("serviceCertification")})();const W=n([]),X=e=>{W.value=e},Y=n(!1),Z=async()=>{const e=[];if(0===W.value.length)return void C({type:"warning",message:"请选择要删除的数据"});W.value&&W.value.map((l=>{e.push(l.ID)}));0===(await l({ids:e})).code&&(C({type:"success",message:"删除成功"}),J.value.length===e.length&&E.value>1&&E.value--,Y.value=!1,Q())},$=n(""),ee=async e=>{0===(await t({ID:e.ID})).code&&(C({type:"success",message:"删除成功"}),1===J.value.length&&E.value>1&&E.value--,Q())},le=n(!1),ae=()=>{$.value="create",le.value=!0},te=()=>{le.value=!1,B.value={phone:"",name:"",way:void 0,principal:"",card:"",mail:"",area:"",address:"",status:void 0,certification:void 0}},ue=async()=>{var e;null==(e=R.value)||e.validate((async e=>{if(!e)return;let l;switch($.value){case"create":default:l=await u(B.value);break;case"update":l=await i(B.value)}0===l.code&&(C({type:"success",message:"创建/更改成功"}),te(),Q())}))};return(e,l)=>{const t=p("el-date-picker"),u=p("el-form-item"),i=p("el-input"),r=p("el-button"),n=p("el-form"),s=p("el-popover"),C=p("el-table-column"),I=p("el-table"),Q=p("el-pagination"),ie=p("el-option"),oe=p("el-select"),de=p("el-dialog");return c(),m("div",null,[v("div",z,[f(n,{inline:!0,model:K.value,class:"demo-form-inline"},{default:g((()=>[f(u,{label:"创建时间"},{default:g((()=>[f(t,{modelValue:K.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>K.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),b(" — "),f(t,{modelValue:K.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>K.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),f(u,{label:"手机号"},{default:g((()=>[f(i,{modelValue:K.value.phone,"onUpdate:modelValue":l[2]||(l[2]=e=>K.value.phone=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),f(u,{label:"机构名称"},{default:g((()=>[f(i,{modelValue:K.value.name,"onUpdate:modelValue":l[3]||(l[3]=e=>K.value.name=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),f(u,null,{default:g((()=>[f(r,{size:"small",type:"primary",icon:"search",onClick:M},{default:g((()=>[b("查询")])),_:1}),f(r,{size:"small",icon:"refresh",onClick:L},{default:g((()=>[b("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),v("div",U,[v("div",x,[f(r,{size:"small",type:"primary",icon:"plus",onClick:ae},{default:g((()=>[b("新增机构")])),_:1}),f(s,{visible:Y.value,"onUpdate:visible":l[6]||(l[6]=e=>Y.value=e),placement:"top",width:"160"},{reference:g((()=>[f(r,{icon:"delete",size:"small",style:{"margin-left":"10px"},disabled:!W.value.length,onClick:l[5]||(l[5]=e=>Y.value=!0)},{default:g((()=>[b("删除")])),_:1},8,["disabled"])])),default:g((()=>[A,v("div",j,[f(r,{size:"small",type:"primary",link:"",onClick:l[4]||(l[4]=e=>Y.value=!1)},{default:g((()=>[b("取消")])),_:1}),f(r,{size:"small",type:"primary",onClick:Z},{default:g((()=>[b("确定")])),_:1})])])),_:1},8,["visible"])]),f(I,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:J.value,"row-key":"ID",onSelectionChange:X},{default:g((()=>[f(C,{align:"left",label:"日期",width:"180"},{default:g((e=>[b(h(y(o)(e.row.CreatedAt)),1)])),_:1}),f(C,{align:"left",label:"手机号",prop:"phone",width:"120"}),f(C,{align:"left",label:"机构名称",prop:"name",width:"120"}),f(C,{align:"left",label:"机构类型",prop:"way",width:"120"},{default:g((e=>[b(h(y(d)(e.row.way,F.value)),1)])),_:1}),f(C,{align:"left",label:"负责人姓名",prop:"principal",width:"120"}),f(C,{align:"left",label:"身份证号",prop:"card",width:"120"}),f(C,{align:"left",label:"邮箱",prop:"mail",width:"120"}),f(C,{align:"left",label:"所属地区",prop:"area",width:"120"}),f(C,{align:"left",label:"详细地区",prop:"address",width:"120"}),f(C,{align:"left",label:"资料状态",prop:"status",width:"120"},{default:g((e=>[b(h(y(d)(e.row.status,S.value)),1)])),_:1}),f(C,{align:"left",label:"资质状态",prop:"certification",width:"120"},{default:g((e=>[b(h(y(d)(e.row.certification,T.value)),1)])),_:1}),f(C,{align:"left",label:"按钮组"},{default:g((e=>[f(r,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{const l=await a({ID:e.ID});$.value="update",0===l.code&&(B.value=l.data.reappFacilitatingAgency,le.value=!0)})(e.row)},{default:g((()=>[b("变更")])),_:2},1032,["onClick"]),f(r,{type:"primary",link:"",icon:"delete",size:"small",onClick:l=>{return a=e.row,void k.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ee(a)}));var a}},{default:g((()=>[b("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),v("div",D,[f(Q,{layout:"total, sizes, prev, pager, next, jumper","current-page":E.value,"page-size":H.value,"page-sizes":[10,30,50,100],total:G.value,onCurrentChange:P,onSizeChange:N},null,8,["current-page","page-size","total"])])]),f(de,{modelValue:le.value,"onUpdate:modelValue":l[17]||(l[17]=e=>le.value=e),"before-close":te,title:"弹窗操作"},{footer:g((()=>[v("div",q,[f(r,{size:"small",onClick:te},{default:g((()=>[b("取 消")])),_:1}),f(r,{size:"small",type:"primary",onClick:ue},{default:g((()=>[b("确 定")])),_:1})])])),default:g((()=>[f(n,{model:B.value,"label-position":"right",ref_key:"elFormRef",ref:R,rules:O,"label-width":"120px"},{default:g((()=>[f(u,{label:"手机号:",prop:"phone"},{default:g((()=>[f(i,{modelValue:B.value.phone,"onUpdate:modelValue":l[7]||(l[7]=e=>B.value.phone=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(u,{label:"机构名称:",prop:"name"},{default:g((()=>[f(i,{modelValue:B.value.name,"onUpdate:modelValue":l[8]||(l[8]=e=>B.value.name=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(u,{label:"机构类型:",prop:"way"},{default:g((()=>[f(oe,{modelValue:B.value.way,"onUpdate:modelValue":l[9]||(l[9]=e=>B.value.way=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:g((()=>[(c(!0),m(w,null,V(F.value,((e,l)=>(c(),_(ie,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(u,{label:"负责人姓名:",prop:"principal"},{default:g((()=>[f(i,{modelValue:B.value.principal,"onUpdate:modelValue":l[10]||(l[10]=e=>B.value.principal=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(u,{label:"身份证号:",prop:"card"},{default:g((()=>[f(i,{modelValue:B.value.card,"onUpdate:modelValue":l[11]||(l[11]=e=>B.value.card=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(u,{label:"邮箱:",prop:"mail"},{default:g((()=>[f(i,{modelValue:B.value.mail,"onUpdate:modelValue":l[12]||(l[12]=e=>B.value.mail=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(u,{label:"所属地区:",prop:"area"},{default:g((()=>[f(i,{modelValue:B.value.area,"onUpdate:modelValue":l[13]||(l[13]=e=>B.value.area=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(u,{label:"详细地区:",prop:"address"},{default:g((()=>[f(i,{modelValue:B.value.address,"onUpdate:modelValue":l[14]||(l[14]=e=>B.value.address=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(u,{label:"资料状态:",prop:"status"},{default:g((()=>[f(oe,{modelValue:B.value.status,"onUpdate:modelValue":l[15]||(l[15]=e=>B.value.status=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:g((()=>[(c(!0),m(w,null,V(S.value,((e,l)=>(c(),_(ie,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(u,{label:"资质状态:",prop:"certification"},{default:g((()=>[f(oe,{modelValue:B.value.certification,"onUpdate:modelValue":l[16]||(l[16]=e=>B.value.certification=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:g((()=>[(c(!0),m(w,null,V(T.value,((e,l)=>(c(),_(ie,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{F as default};

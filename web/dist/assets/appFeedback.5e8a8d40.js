/*! 
 Build based on gin-vue-admin 
 Time : 1670837959000 */
import{g as e,f as a,d as l,c as t,u as o}from"./appFeedback.5a19b359.js";import{f as u}from"./format.215352f7.js";import{r as s,a as d,b as i,o as n,c as r,d as c,e as p,w as m,h as v,t as f,A as b,C as g,i as y}from"./index.42b7f490.js";import"./date.34b11046.js";import"./dictionary.528e6e48.js";import"./dictionary.3462a5b2.js";import"./sysDictionary.e268ed4c.js";const h={class:"gva-search-box"},k={class:"gva-table-box"},C={class:"gva-pagination"},w={class:"dialog-footer"},_={name:"AppFeedback"},V=Object.assign(_,{setup(_){const V=s({uid:0,contents:""}),z=d({}),j=s(),x=s(1),A=s(0),D=s(10),I=s([]),U=s({}),F=()=>{U.value={}},S=()=>{x.value=1,D.value=10,M()},T=e=>{D.value=e,M()},B=e=>{x.value=e,M()},M=async()=>{const a=await e({page:x.value,pageSize:D.value,...U.value});0===a.code&&(I.value=a.data.list,A.value=a.data.total,x.value=a.data.page,D.value=a.data.pageSize)};M();(async()=>{})();const O=s([]),R=e=>{O.value=e};s(!1);const q=s(""),E=async e=>{0===(await l({ID:e.ID})).code&&(y({type:"success",message:"删除成功"}),1===I.value.length&&x.value>1&&x.value--,M())},G=s(!1),H=()=>{G.value=!1,V.value={uid:0,contents:""}},J=async()=>{var e;null==(e=j.value)||e.validate((async e=>{if(!e)return;let a;switch(q.value){case"create":default:a=await t(V.value);break;case"update":a=await o(V.value)}0===a.code&&(y({type:"success",message:"创建/更改成功"}),H(),M())}))};return(e,l)=>{const t=i("el-date-picker"),o=i("el-form-item"),s=i("el-button"),d=i("el-form"),y=i("el-table-column"),_=i("el-table"),M=i("el-pagination"),O=i("el-input"),K=i("el-dialog");return n(),r("div",null,[c("div",h,[p(d,{inline:!0,model:U.value,class:"demo-form-inline"},{default:m((()=>[p(o,{label:"创建时间"},{default:m((()=>[p(t,{modelValue:U.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>U.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),v(" — "),p(t,{modelValue:U.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>U.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),p(o,null,{default:m((()=>[p(s,{size:"small",type:"primary",icon:"search",onClick:S},{default:m((()=>[v("查询")])),_:1}),p(s,{size:"small",icon:"refresh",onClick:F},{default:m((()=>[v("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),c("div",k,[p(_,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:I.value,"row-key":"ID",onSelectionChange:R},{default:m((()=>[p(y,{align:"left",label:"日期",width:"180"},{default:m((e=>[v(f(b(u)(e.row.CreatedAt)),1)])),_:1}),p(y,{align:"left",label:"用户",prop:"uid",width:"120"}),p(y,{align:"left",label:"反馈内容",prop:"contents",width:"120"}),p(y,{align:"left",label:"按钮组"},{default:m((e=>[p(s,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{const l=await a({ID:e.ID});q.value="update",0===l.code&&(V.value=l.data.reappFeedback,G.value=!0)})(e.row)},{default:m((()=>[v("变更")])),_:2},1032,["onClick"]),p(s,{type:"primary",link:"",icon:"delete",size:"small",onClick:a=>{return l=e.row,void g.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{E(l)}));var l}},{default:m((()=>[v("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),c("div",C,[p(M,{layout:"total, sizes, prev, pager, next, jumper","current-page":x.value,"page-size":D.value,"page-sizes":[10,30,50,100],total:A.value,onCurrentChange:B,onSizeChange:T},null,8,["current-page","page-size","total"])])]),p(K,{modelValue:G.value,"onUpdate:modelValue":l[4]||(l[4]=e=>G.value=e),"before-close":H,title:"弹窗操作"},{footer:m((()=>[c("div",w,[p(s,{size:"small",onClick:H},{default:m((()=>[v("取 消")])),_:1}),p(s,{size:"small",type:"primary",onClick:J},{default:m((()=>[v("确 定")])),_:1})])])),default:m((()=>[p(d,{model:V.value,"label-position":"right",ref_key:"elFormRef",ref:j,rules:z,"label-width":"80px"},{default:m((()=>[p(o,{label:"用户:",prop:"uid"},{default:m((()=>[p(O,{modelValue:V.value.uid,"onUpdate:modelValue":l[2]||(l[2]=e=>V.value.uid=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),p(o,{label:"反馈内容:",prop:"contents"},{default:m((()=>[p(O,{modelValue:V.value.contents,"onUpdate:modelValue":l[3]||(l[3]=e=>V.value.contents=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{V as default};

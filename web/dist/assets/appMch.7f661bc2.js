/*! 
 Build based on gin-vue-admin 
 Time : 1670837959000 */
import{g as e,d as l,f as a,a as u,c as t,u as r}from"./appMch.cb33098a.js";import{f as o,a as d,g as i}from"./format.215352f7.js";import{r as s,a as n,b as m,o as p,c,d as v,e as f,w as b,h as g,F as V,x as h,m as y,t as _,A as k,C as w,i as C}from"./index.42b7f490.js";import"./date.34b11046.js";import"./dictionary.528e6e48.js";import"./dictionary.3462a5b2.js";import"./sysDictionary.e268ed4c.js";const U={class:"gva-search-box"},z={class:"gva-table-box"},N={class:"gva-btn-list"},q=v("p",null,"确定要删除吗？",-1),x={style:{"text-align":"right","margin-top":"8px"}},T={class:"gva-pagination"},j={class:"dialog-footer"},D={name:"AppMch"},F=Object.assign(D,{setup(D){const F=s([]),I=s({uid:0,firmName:"",storeName:"",mainType:"",commission:0,final:0,acquirer:0,legalPerson:"",phone:"",avatar:"",cardFront:"",cardReverse:"",entrust:"",remark:"",status:void 0}),A=n({firmName:[{required:!0,message:"",trigger:["input","blur"]}],mainType:[{required:!0,message:"",trigger:["input","blur"]}],commission:[{required:!0,message:"",trigger:["input","blur"]}],legalPerson:[{required:!0,message:"",trigger:["input","blur"]}],avatar:[{required:!0,message:"",trigger:["input","blur"]}],cardFront:[{required:!0,message:"",trigger:["input","blur"]}],cardReverse:[{required:!0,message:"",trigger:["input","blur"]}],entrust:[{required:!0,message:"",trigger:["input","blur"]}],status:[{required:!0,message:"",trigger:["input","blur"]}]}),M=s(),R=s(1),P=s(0),S=s(10),B=s([]),O=s({}),E=()=>{O.value={}},G=()=>{R.value=1,S.value=10,K()},H=e=>{S.value=e,K()},J=e=>{R.value=e,K()},K=async()=>{const l=await e({page:R.value,pageSize:S.value,...O.value});0===l.code&&(B.value=l.data.list,P.value=l.data.total,R.value=l.data.page,S.value=l.data.pageSize)};K();(async()=>{F.value=await i("checkState")})();const L=s([]),Q=e=>{L.value=e},W=s(!1),X=async()=>{const e=[];if(0===L.value.length)return void C({type:"warning",message:"请选择要删除的数据"});L.value&&L.value.map((l=>{e.push(l.ID)}));0===(await l({ids:e})).code&&(C({type:"success",message:"删除成功"}),B.value.length===e.length&&R.value>1&&R.value--,W.value=!1,K())},Y=s(""),Z=async e=>{0===(await u({ID:e.ID})).code&&(C({type:"success",message:"删除成功"}),1===B.value.length&&R.value>1&&R.value--,K())},$=s(!1),ee=()=>{Y.value="create",$.value=!0},le=()=>{$.value=!1,I.value={uid:0,firmName:"",storeName:"",mainType:"",commission:0,final:0,acquirer:0,legalPerson:"",phone:"",avatar:"",cardFront:"",cardReverse:"",entrust:"",remark:"",status:void 0}},ae=async()=>{var e;null==(e=M.value)||e.validate((async e=>{if(!e)return;let l;switch(Y.value){case"create":default:l=await t(I.value);break;case"update":l=await r(I.value)}0===l.code&&(C({type:"success",message:"创建/更改成功"}),le(),K())}))};return(e,l)=>{const u=m("el-date-picker"),t=m("el-form-item"),r=m("el-input"),i=m("el-option"),s=m("el-select"),n=m("el-button"),C=m("el-form"),D=m("el-popover"),K=m("el-table-column"),ue=m("el-table"),te=m("el-pagination"),re=m("el-dialog");return p(),c("div",null,[v("div",U,[f(C,{inline:!0,model:O.value,class:"demo-form-inline"},{default:b((()=>[f(t,{label:"创建时间"},{default:b((()=>[f(u,{modelValue:O.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>O.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),g(" — "),f(u,{modelValue:O.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>O.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),f(t,{label:"企业名称"},{default:b((()=>[f(r,{modelValue:O.value.firmName,"onUpdate:modelValue":l[2]||(l[2]=e=>O.value.firmName=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),f(t,{label:"店铺名称"},{default:b((()=>[f(r,{modelValue:O.value.storeName,"onUpdate:modelValue":l[3]||(l[3]=e=>O.value.storeName=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),f(t,{label:"状态",prop:"status"},{default:b((()=>[f(s,{modelValue:O.value.status,"onUpdate:modelValue":l[4]||(l[4]=e=>O.value.status=e),clearable:"",placeholder:"请选择",onClear:l[5]||(l[5]=()=>{O.value.status=void 0})},{default:b((()=>[(p(!0),c(V,null,h(F.value,((e,l)=>(p(),y(i,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(t,null,{default:b((()=>[f(n,{size:"small",type:"primary",icon:"search",onClick:G},{default:b((()=>[g("查询")])),_:1}),f(n,{size:"small",icon:"refresh",onClick:E},{default:b((()=>[g("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),v("div",z,[v("div",N,[f(n,{size:"small",type:"primary",icon:"plus",onClick:ee},{default:b((()=>[g("新增")])),_:1}),f(D,{visible:W.value,"onUpdate:visible":l[8]||(l[8]=e=>W.value=e),placement:"top",width:"160"},{reference:b((()=>[f(n,{icon:"delete",size:"small",style:{"margin-left":"10px"},disabled:!L.value.length,onClick:l[7]||(l[7]=e=>W.value=!0)},{default:b((()=>[g("删除")])),_:1},8,["disabled"])])),default:b((()=>[q,v("div",x,[f(n,{size:"small",type:"primary",link:"",onClick:l[6]||(l[6]=e=>W.value=!1)},{default:b((()=>[g("取消")])),_:1}),f(n,{size:"small",type:"primary",onClick:X},{default:b((()=>[g("确定")])),_:1})])])),_:1},8,["visible"])]),f(ue,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:B.value,"row-key":"ID",onSelectionChange:Q},{default:b((()=>[f(K,{align:"left",label:"日期",width:"180"},{default:b((e=>[g(_(k(o)(e.row.CreatedAt)),1)])),_:1}),f(K,{align:"left",label:"商户ID",prop:"uid",width:"120"}),f(K,{align:"left",label:"企业名称",prop:"firmName",width:"120"}),f(K,{align:"left",label:"店铺名称",prop:"storeName",width:"120"}),f(K,{align:"left",label:"主营品类",prop:"mainType",width:"120"}),f(K,{align:"left",label:"备注",prop:"remark",width:"120"}),f(K,{align:"left",label:"状态",prop:"status",width:"120"},{default:b((e=>[g(_(k(d)(e.row.status,F.value)),1)])),_:1}),f(K,{align:"left",label:"按钮组"},{default:b((e=>[f(n,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{const l=await a({ID:e.ID});Y.value="update",0===l.code&&(I.value=l.data.reappMch,$.value=!0)})(e.row)},{default:b((()=>[g("变更")])),_:2},1032,["onClick"]),f(n,{type:"primary",link:"",icon:"delete",size:"small",onClick:l=>{return a=e.row,void w.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{Z(a)}));var a}},{default:b((()=>[g("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),v("div",T,[f(te,{layout:"total, sizes, prev, pager, next, jumper","current-page":R.value,"page-size":S.value,"page-sizes":[10,30,50,100],total:P.value,onCurrentChange:J,onSizeChange:H},null,8,["current-page","page-size","total"])])]),f(re,{modelValue:$.value,"onUpdate:modelValue":l[24]||(l[24]=e=>$.value=e),"before-close":le,title:"弹窗操作"},{footer:b((()=>[v("div",j,[f(n,{size:"small",onClick:le},{default:b((()=>[g("取 消")])),_:1}),f(n,{size:"small",type:"primary",onClick:ae},{default:b((()=>[g("确 定")])),_:1})])])),default:b((()=>[f(C,{model:I.value,"label-position":"right",ref_key:"elFormRef",ref:M,rules:A,"label-width":"80px"},{default:b((()=>[f(t,{label:"商户ID:",prop:"uid"},{default:b((()=>[f(r,{modelValue:I.value.uid,"onUpdate:modelValue":l[9]||(l[9]=e=>I.value.uid=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(t,{label:"企业名称:",prop:"firmName"},{default:b((()=>[f(r,{modelValue:I.value.firmName,"onUpdate:modelValue":l[10]||(l[10]=e=>I.value.firmName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(t,{label:"店铺名称:",prop:"storeName"},{default:b((()=>[f(r,{modelValue:I.value.storeName,"onUpdate:modelValue":l[11]||(l[11]=e=>I.value.storeName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(t,{label:"主营品类:",prop:"mainType"},{default:b((()=>[f(r,{modelValue:I.value.mainType,"onUpdate:modelValue":l[12]||(l[12]=e=>I.value.mainType=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(t,{label:"确认佣金:",prop:"commission"},{default:b((()=>[f(r,{modelValue:I.value.commission,"onUpdate:modelValue":l[13]||(l[13]=e=>I.value.commission=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(t,{label:"T+1结算:",prop:"final"},{default:b((()=>[f(r,{modelValue:I.value.final,"onUpdate:modelValue":l[14]||(l[14]=e=>I.value.final=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(t,{label:"特约收单:",prop:"acquirer"},{default:b((()=>[f(r,{modelValue:I.value.acquirer,"onUpdate:modelValue":l[15]||(l[15]=e=>I.value.acquirer=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(t,{label:"法人:",prop:"legalPerson"},{default:b((()=>[f(r,{modelValue:I.value.legalPerson,"onUpdate:modelValue":l[16]||(l[16]=e=>I.value.legalPerson=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(t,{label:"热线电话:",prop:"phone"},{default:b((()=>[f(r,{modelValue:I.value.phone,"onUpdate:modelValue":l[17]||(l[17]=e=>I.value.phone=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(t,{label:"负责人头像:",prop:"avatar"},{default:b((()=>[f(r,{modelValue:I.value.avatar,"onUpdate:modelValue":l[18]||(l[18]=e=>I.value.avatar=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(t,{label:"身份证正面:",prop:"cardFront"},{default:b((()=>[f(r,{modelValue:I.value.cardFront,"onUpdate:modelValue":l[19]||(l[19]=e=>I.value.cardFront=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(t,{label:"身份证反面:",prop:"cardReverse"},{default:b((()=>[f(r,{modelValue:I.value.cardReverse,"onUpdate:modelValue":l[20]||(l[20]=e=>I.value.cardReverse=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(t,{label:"委托书:",prop:"entrust"},{default:b((()=>[f(r,{modelValue:I.value.entrust,"onUpdate:modelValue":l[21]||(l[21]=e=>I.value.entrust=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(t,{label:"备注:",prop:"remark"},{default:b((()=>[f(r,{modelValue:I.value.remark,"onUpdate:modelValue":l[22]||(l[22]=e=>I.value.remark=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(t,{label:"状态:",prop:"status"},{default:b((()=>[f(s,{modelValue:I.value.status,"onUpdate:modelValue":l[23]||(l[23]=e=>I.value.status=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:b((()=>[(p(!0),c(V,null,h(F.value,((e,l)=>(p(),y(i,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{F as default};

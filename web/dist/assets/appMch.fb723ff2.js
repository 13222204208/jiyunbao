/*! 
 Build based on gin-vue-admin 
 Time : 1675935707000 */
import{g as e,d as l,f as a,a as t,c as u,u as r}from"./appMch.ee06241f.js";import{f as o,a as i,g as d}from"./format.a5b70b7c.js";import{r as s,a as n,b as p,o as m,c,d as v,e as b,w as f,h as g,F as h,x as V,m as y,t as w,z as _,A as k,i as z}from"./index.3b117381.js";import"./date.34b11046.js";import"./dictionary.c64483b9.js";import"./dictionary.2e4ec8e3.js";import"./sysDictionary.3083fcf3.js";const C={class:"gva-search-box"},U={class:"gva-table-box"},N={class:"gva-btn-list"},q=v("p",null,"确定要删除吗？",-1),x={style:{"text-align":"right","margin-top":"8px"}},T=v("br",null,null,-1),j={class:"gva-pagination"},D={class:"dialog-footer"},F={name:"AppMch"},I=Object.assign(F,{setup(F){const I=s([]),A=s({uid:0,firmName:"",storeName:"",mainType:"",commission:0,final:0,acquirer:0,legalPerson:"",phone:"",avatar:"",cardFront:"",cardReverse:"",entrust:"",remark:"",status:void 0}),M=n({firmName:[{required:!0,message:"",trigger:["input","blur"]}],mainType:[{required:!0,message:"",trigger:["input","blur"]}],commission:[{required:!0,message:"",trigger:["input","blur"]}],legalPerson:[{required:!0,message:"",trigger:["input","blur"]}],avatar:[{required:!0,message:"",trigger:["input","blur"]}],cardFront:[{required:!0,message:"",trigger:["input","blur"]}],cardReverse:[{required:!0,message:"",trigger:["input","blur"]}],entrust:[{required:!0,message:"",trigger:["input","blur"]}],status:[{required:!0,message:"",trigger:["input","blur"]}]}),R=s(),P=s(1),S=s(0),B=s(10),O=s([]),E=s({}),G=()=>{E.value={}},H=()=>{P.value=1,B.value=10,L()},J=e=>{B.value=e,L()},K=e=>{P.value=e,L()},L=async()=>{const l=await e({page:P.value,pageSize:B.value,...E.value});0===l.code&&(O.value=l.data.list,S.value=l.data.total,P.value=l.data.page,B.value=l.data.pageSize)};L();(async()=>{I.value=await d("checkState")})();const Q=s([]),W=e=>{Q.value=e},X=s(!1),Y=async()=>{const e=[];if(0===Q.value.length)return void z({type:"warning",message:"请选择要删除的数据"});Q.value&&Q.value.map((l=>{e.push(l.ID)}));0===(await l({ids:e})).code&&(z({type:"success",message:"删除成功"}),O.value.length===e.length&&P.value>1&&P.value--,X.value=!1,L())},Z=s(""),$=async e=>{0===(await t({ID:e.ID})).code&&(z({type:"success",message:"删除成功"}),1===O.value.length&&P.value>1&&P.value--,L())},ee=s(!1),le=()=>{Z.value="create",ee.value=!0},ae=()=>{ee.value=!1,A.value={uid:0,firmName:"",storeName:"",mainType:"",commission:0,final:0,acquirer:0,legalPerson:"",phone:"",avatar:"",cardFront:"",cardReverse:"",entrust:"",remark:"",status:void 0}},te=async()=>{var e;null==(e=R.value)||e.validate((async e=>{if(!e)return;let l;switch(Z.value){case"create":default:l=await u(A.value);break;case"update":l=await r(A.value)}0===l.code&&(z({type:"success",message:"创建/更改成功"}),ae(),L())}))};return(e,l)=>{const t=p("el-date-picker"),u=p("el-form-item"),r=p("el-input"),d=p("el-option"),s=p("el-select"),n=p("el-button"),z=p("el-form"),F=p("el-popover"),L=p("el-table-column"),ue=p("el-table"),re=p("el-pagination"),oe=p("el-dialog");return m(),c("div",null,[v("div",C,[b(z,{inline:!0,model:E.value,class:"demo-form-inline"},{default:f((()=>[b(u,{label:"创建时间"},{default:f((()=>[b(t,{modelValue:E.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>E.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),g(" — "),b(t,{modelValue:E.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>E.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),b(u,{label:"店铺名称"},{default:f((()=>[b(r,{modelValue:E.value.storeName,"onUpdate:modelValue":l[2]||(l[2]=e=>E.value.storeName=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),b(u,{label:"状态",prop:"status"},{default:f((()=>[b(s,{modelValue:E.value.status,"onUpdate:modelValue":l[3]||(l[3]=e=>E.value.status=e),clearable:"",placeholder:"请选择",onClear:l[4]||(l[4]=()=>{E.value.status=void 0})},{default:f((()=>[(m(!0),c(h,null,V(I.value,((e,l)=>(m(),y(d,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),b(u,null,{default:f((()=>[b(n,{size:"small",type:"primary",icon:"search",onClick:H},{default:f((()=>[g("查询")])),_:1}),b(n,{size:"small",icon:"refresh",onClick:G},{default:f((()=>[g("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),v("div",U,[v("div",N,[b(n,{size:"small",type:"primary",icon:"plus",onClick:le},{default:f((()=>[g("新增")])),_:1}),b(F,{visible:X.value,"onUpdate:visible":l[7]||(l[7]=e=>X.value=e),placement:"top",width:"160"},{reference:f((()=>[b(n,{icon:"delete",size:"small",style:{"margin-left":"10px"},disabled:!Q.value.length,onClick:l[6]||(l[6]=e=>X.value=!0)},{default:f((()=>[g("删除")])),_:1},8,["disabled"])])),default:f((()=>[q,v("div",x,[b(n,{size:"small",type:"primary",link:"",onClick:l[5]||(l[5]=e=>X.value=!1)},{default:f((()=>[g("取消")])),_:1}),b(n,{size:"small",type:"primary",onClick:Y},{default:f((()=>[g("确定")])),_:1})])])),_:1},8,["visible"])]),b(ue,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:O.value,"row-key":"ID",onSelectionChange:W},{default:f((()=>[b(L,{align:"center",label:"商户ID",prop:"uid",width:"80"}),b(L,{align:"left",label:"商户昵称",prop:"",width:"120"}),b(L,{align:"left",label:"企业名称",prop:"firmName",width:"120"}),b(L,{align:"left",label:"店铺名称",prop:"storeName",width:"120"}),b(L,{align:"left",label:"商户种类",prop:"",width:"120"}),b(L,{align:"left",label:"注册手机",prop:"",width:"120"}),b(L,{align:"left",label:"注册日期",width:"180"},{default:f((e=>[g(w(_(o)(e.row.CreatedAt)),1)])),_:1}),b(L,{align:"left",label:"商户类型",prop:"",width:"120"}),b(L,{align:"left",label:"商户状态",prop:"",width:"120"}),b(L,{align:"left",label:"结算模式",prop:"",width:"120"}),b(L,{align:"left",label:"联保代码",prop:"",width:"120"}),b(L,{align:"left",label:"主营品类",prop:"mainType",width:"120"}),b(L,{align:"left",label:"从业资格证",prop:"",width:"120"}),b(L,{align:"left",label:"车辆运输证",prop:"",width:"120"}),b(L,{align:"left",label:"车辆照片",prop:"",width:"120"}),b(L,{align:"left",label:"驾驶室照片",prop:"",width:"120"}),b(L,{align:"left",label:"负责人照片",prop:"",width:"120"}),b(L,{align:"left",label:"身份证头像面",prop:"",width:"120"}),b(L,{align:"left",label:"身份证国徽面",prop:"",width:"120"}),b(L,{align:"left",label:"营业执照",prop:"",width:"120"}),b(L,{align:"left",label:"许可证",prop:"",width:"120"}),b(L,{align:"left",label:"其它资料",prop:"",width:"120"}),b(L,{align:"left",label:"备注",prop:"remark",width:"120"}),b(L,{align:"left",label:"状态",prop:"status",width:"120"},{default:f((e=>[g(w(_(i)(e.row.status,I.value)),1)])),_:1}),b(L,{fixed:"right",label:"按钮组",width:"175"},{default:f((e=>[b(n,{type:"primary",link:"",size:"small",class:"table-button"},{default:f((()=>[g("支付认证")])),_:1}),b(n,{type:"primary",link:"",size:"small",class:"table-button",onClick:l=>(async e=>{const l=await a({ID:e.ID});Z.value="update",0===l.code&&(A.value=l.data.reappMch,ee.value=!0)})(e.row)},{default:f((()=>[g("变更")])),_:2},1032,["onClick"]),b(n,{type:"primary",link:"",size:"small",class:"table-button"},{default:f((()=>[g("审核")])),_:1}),T,b(n,{type:"primary",link:"",size:"small",class:"table-button"},{default:f((()=>[g("认证查询")])),_:1}),b(n,{type:"primary",link:"",size:"small",onClick:l=>{return a=e.row,void k.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{$(a)}));var a},class:"table-button"},{default:f((()=>[g("删除")])),_:2},1032,["onClick"]),b(n,{type:"primary",link:"",size:"small",class:"table-button"},{default:f((()=>[g("禁用")])),_:1})])),_:1})])),_:1},8,["data"]),v("div",j,[b(re,{layout:"total, sizes, prev, pager, next, jumper","current-page":P.value,"page-size":B.value,"page-sizes":[10,30,50,100],total:S.value,onCurrentChange:K,onSizeChange:J},null,8,["current-page","page-size","total"])])]),b(oe,{modelValue:ee.value,"onUpdate:modelValue":l[23]||(l[23]=e=>ee.value=e),"before-close":ae,title:"弹窗操作"},{footer:f((()=>[v("div",D,[b(n,{size:"small",onClick:ae},{default:f((()=>[g("取 消")])),_:1}),b(n,{size:"small",type:"primary",onClick:te},{default:f((()=>[g("确 定")])),_:1})])])),default:f((()=>[b(z,{model:A.value,"label-position":"right",ref_key:"elFormRef",ref:R,rules:M,"label-width":"80px"},{default:f((()=>[b(u,{label:"商户ID:",prop:"uid"},{default:f((()=>[b(r,{modelValue:A.value.uid,"onUpdate:modelValue":l[8]||(l[8]=e=>A.value.uid=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),b(u,{label:"企业名称:",prop:"firmName"},{default:f((()=>[b(r,{modelValue:A.value.firmName,"onUpdate:modelValue":l[9]||(l[9]=e=>A.value.firmName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),b(u,{label:"店铺名称:",prop:"storeName"},{default:f((()=>[b(r,{modelValue:A.value.storeName,"onUpdate:modelValue":l[10]||(l[10]=e=>A.value.storeName=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),b(u,{label:"主营品类:",prop:"mainType"},{default:f((()=>[b(r,{modelValue:A.value.mainType,"onUpdate:modelValue":l[11]||(l[11]=e=>A.value.mainType=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),b(u,{label:"确认佣金:",prop:"commission"},{default:f((()=>[b(r,{modelValue:A.value.commission,"onUpdate:modelValue":l[12]||(l[12]=e=>A.value.commission=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),b(u,{label:"T+1结算:",prop:"final"},{default:f((()=>[b(r,{modelValue:A.value.final,"onUpdate:modelValue":l[13]||(l[13]=e=>A.value.final=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),b(u,{label:"特约收单:",prop:"acquirer"},{default:f((()=>[b(r,{modelValue:A.value.acquirer,"onUpdate:modelValue":l[14]||(l[14]=e=>A.value.acquirer=e),modelModifiers:{number:!0},clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),b(u,{label:"法人:",prop:"legalPerson"},{default:f((()=>[b(r,{modelValue:A.value.legalPerson,"onUpdate:modelValue":l[15]||(l[15]=e=>A.value.legalPerson=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),b(u,{label:"热线电话:",prop:"phone"},{default:f((()=>[b(r,{modelValue:A.value.phone,"onUpdate:modelValue":l[16]||(l[16]=e=>A.value.phone=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),b(u,{label:"负责人头像:",prop:"avatar"},{default:f((()=>[b(r,{modelValue:A.value.avatar,"onUpdate:modelValue":l[17]||(l[17]=e=>A.value.avatar=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),b(u,{label:"身份证正面:",prop:"cardFront"},{default:f((()=>[b(r,{modelValue:A.value.cardFront,"onUpdate:modelValue":l[18]||(l[18]=e=>A.value.cardFront=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),b(u,{label:"身份证反面:",prop:"cardReverse"},{default:f((()=>[b(r,{modelValue:A.value.cardReverse,"onUpdate:modelValue":l[19]||(l[19]=e=>A.value.cardReverse=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),b(u,{label:"委托书:",prop:"entrust"},{default:f((()=>[b(r,{modelValue:A.value.entrust,"onUpdate:modelValue":l[20]||(l[20]=e=>A.value.entrust=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),b(u,{label:"备注:",prop:"remark"},{default:f((()=>[b(r,{modelValue:A.value.remark,"onUpdate:modelValue":l[21]||(l[21]=e=>A.value.remark=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),b(u,{label:"状态:",prop:"status"},{default:f((()=>[b(s,{modelValue:A.value.status,"onUpdate:modelValue":l[22]||(l[22]=e=>A.value.status=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:f((()=>[(m(!0),c(h,null,V(I.value,((e,l)=>(m(),y(d,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{I as default};

/*! 
 Build based on gin-vue-admin 
 Time : 1673519692000 */
import{g as e,d as l,u as a,q as t,b as s,a as o,c as u}from"./appSignContract.279e7bb1.js";import{f as i,a as n,g as d}from"./format.9730cff4.js";import{r,a as c,b as p,o as v,c as m,d as g,e as f,w as b,h as y,t as h,z as C,F as w,x as _,m as k,A as z,i as V}from"./index.29e958a1.js";import"./date.34b11046.js";import"./dictionary.756c2897.js";import"./dictionary.90e3faa4.js";import"./sysDictionary.77e8fb14.js";const I={class:"gva-search-box"},T={class:"gva-table-box"},S={class:"gva-btn-list"},x=g("p",null,"确定要删除吗？",-1),j={style:{"text-align":"right","margin-top":"8px"}},U={class:"gva-pagination"},M={class:"dialog-footer"},q={name:"AppSignContract"},A=Object.assign(q,{setup(q){const A=r([]),D=r([]),O=r({reqId:"",certId:"",busOpenType:"",contractType:void 0,isSendConMsg:void 0,notifyUrl:"",custId:""}),B=c({contractType:[{required:!0,message:"",trigger:["input","blur"]}],isSendConMsg:[{required:!0,message:"",trigger:["input","blur"]}],custId:[{required:!0,message:"",trigger:["input","blur"]}]}),F=r(),K=r(1),R=r(0),E=r(10),G=r([]),H=r({}),J=r([]),L=()=>{H.value={}},N=()=>{K.value=1,E.value=10,W()},P=e=>{E.value=e,W()},Q=e=>{K.value=e,W()},W=async()=>{const l=await e({page:K.value,pageSize:E.value,...H.value});0===l.code&&(G.value=l.data.list,R.value=l.data.total,K.value=l.data.page,E.value=l.data.pageSize)};W();(async()=>{A.value=await d("contractType"),D.value=await d("isSendConMsg")})();const X=r([]),Y=e=>{X.value=e},Z=r(!1),$=async()=>{const e=[];if(0===X.value.length)return void V({type:"warning",message:"请选择要删除的数据"});X.value&&X.value.map((l=>{e.push(l.ID)}));0===(await l({ids:e})).code&&(V({type:"success",message:"删除成功"}),G.value.length===e.length&&K.value>1&&K.value--,Z.value=!1,W())},ee=r(""),le=async e=>{0===(await o({ID:e.ID})).code&&(V({type:"success",message:"删除成功"}),1===G.value.length&&K.value>1&&K.value--,W())},ae=r(!1),te=()=>{ee.value="create",ae.value=!0},se=()=>{ae.value=!1,O.value={reqId:"",certId:"",busOpenType:"",contractType:void 0,isSendConMsg:void 0,notifyUrl:"",custId:""}},oe=async()=>{var e;null==(e=F.value)||e.validate((async e=>{console.log("提交的数据",J.value);let l,t=J.value,s=[];for(var o=0;o<t.length;o++)console.log("数据： ",t[o]),"扫码工作日到账"==t[o]&&s.push("00"),"扫码实时到账"==t[o]&&(console.log("第二 ",t[o]),s.push("01")),"刷卡工作日到账"==t[o]&&s.push("10"),"刷卡实时到账"==t[o]&&s.push("11"),"D1到账"==t[o]&&s.push("20");if(s.length>1?O.value.busOpenType=s.join("|"):O.value.busOpenType=s.toString(),console.log("挚友",O.value),e){switch(ee.value){case"create":default:l=await u(O.value);break;case"update":l=await a(O.value)}0===l.code&&(V({type:"success",message:"创建/更改成功"}),se(),W())}}))};return(e,l)=>{const o=p("el-date-picker"),u=p("el-form-item"),d=p("el-button"),r=p("el-form"),c=p("el-popover"),q=p("el-table-column"),W=p("el-table"),ee=p("el-pagination"),ue=p("el-checkbox"),ie=p("el-checkbox-group"),ne=p("el-option"),de=p("el-select"),re=p("el-input"),ce=p("el-dialog");return v(),m("div",null,[g("div",I,[f(r,{inline:!0,model:H.value,class:"demo-form-inline"},{default:b((()=>[f(u,{label:"创建时间"},{default:b((()=>[f(o,{modelValue:H.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>H.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),y(" — "),f(o,{modelValue:H.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>H.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),f(u,null,{default:b((()=>[f(d,{size:"small",type:"primary",icon:"search",onClick:N},{default:b((()=>[y("查询")])),_:1}),f(d,{size:"small",icon:"refresh",onClick:L},{default:b((()=>[y("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),g("div",T,[g("div",S,[f(d,{size:"small",type:"primary",icon:"plus",onClick:te},{default:b((()=>[y("新增")])),_:1}),f(c,{visible:Z.value,"onUpdate:visible":l[4]||(l[4]=e=>Z.value=e),placement:"top",width:"160"},{reference:b((()=>[f(d,{icon:"delete",size:"small",style:{"margin-left":"10px"},disabled:!X.value.length,onClick:l[3]||(l[3]=e=>Z.value=!0)},{default:b((()=>[y("删除")])),_:1},8,["disabled"])])),default:b((()=>[x,g("div",j,[f(d,{size:"small",type:"primary",link:"",onClick:l[2]||(l[2]=e=>Z.value=!1)},{default:b((()=>[y("取消")])),_:1}),f(d,{size:"small",type:"primary",onClick:$},{default:b((()=>[y("确定")])),_:1})])])),_:1},8,["visible"])]),f(W,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:G.value,"row-key":"ID",onSelectionChange:Y},{default:b((()=>[f(q,{align:"left",label:"日期",width:"180"},{default:b((e=>[y(h(C(i)(e.row.CreatedAt)),1)])),_:1}),f(q,{align:"left",label:"流水号",prop:"reqId",width:"180"}),f(q,{align:"left",label:"商户号",prop:"mercId",width:"180"}),f(q,{align:"left",label:"合同类型",prop:"contractType",width:"120"},{default:b((e=>[y(h(C(n)(e.row.contractType,A.value)),1)])),_:1}),f(q,{align:"left",label:"签约通知",prop:"isSendConMsg",width:"120"},{default:b((e=>[y(h(C(n)(e.row.isSendConMsg,D.value)),1)])),_:1}),f(q,{align:"left",label:"客户号",prop:"custId",width:"180"}),f(q,{align:"left",label:"按钮组"},{default:b((e=>[f(d,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{const l=await a(e);0===l.code&&V({type:"success",message:l.msg})})(e.row)},{default:b((()=>[y("签约申请")])),_:2},1032,["onClick"]),f(d,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{const l=await t(e);0===l.code&&V({type:"success",message:l.msg})})(e.row)},{default:b((()=>[y("签约状态")])),_:2},1032,["onClick"]),f(d,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{const l=await s({mercId:e.mercId});if(0===l.code){let e="金额："+l.msg;z.alert(e,"商户总额",{confirmButtonText:"OK"})}})(e.row)},{default:b((()=>[y("余额查询")])),_:2},1032,["onClick"]),f(d,{type:"primary",link:"",icon:"delete",size:"small",onClick:l=>{return a=e.row,void z.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{le(a)}));var a}},{default:b((()=>[y("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),g("div",U,[f(ee,{layout:"total, sizes, prev, pager, next, jumper","current-page":K.value,"page-size":E.value,"page-sizes":[10,30,50,100],total:R.value,onCurrentChange:Q,onSizeChange:P},null,8,["current-page","page-size","total"])])]),f(ce,{modelValue:ae.value,"onUpdate:modelValue":l[9]||(l[9]=e=>ae.value=e),"before-close":se,title:"弹窗操作"},{footer:b((()=>[g("div",M,[f(d,{size:"small",onClick:se},{default:b((()=>[y("取 消")])),_:1}),f(d,{size:"small",type:"primary",onClick:oe},{default:b((()=>[y("确 定")])),_:1})])])),default:b((()=>[f(r,{model:O.value,"label-position":"right",ref_key:"elFormRef",ref:F,rules:B,"label-width":"100px"},{default:b((()=>[f(u,{label:"到账方式:",prop:"busOpenType"},{default:b((()=>[f(ie,{modelValue:J.value,"onUpdate:modelValue":l[5]||(l[5]=e=>J.value=e)},{default:b((()=>[f(ue,{label:"扫码工作日到账",size:"large"}),f(ue,{label:"扫码实时到账",size:"large"}),f(ue,{label:"刷卡工作日到账",size:"large"}),f(ue,{label:"刷卡实时到账",size:"large"}),f(ue,{label:"D1到账 ",size:"large"})])),_:1},8,["modelValue"])])),_:1}),f(u,{label:"合同类型:",prop:"contractType"},{default:b((()=>[f(de,{modelValue:O.value.contractType,"onUpdate:modelValue":l[6]||(l[6]=e=>O.value.contractType=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:b((()=>[(v(!0),m(w,null,_(A.value,((e,l)=>(v(),k(ne,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(u,{label:"签约通知:",prop:"isSendConMsg"},{default:b((()=>[f(de,{modelValue:O.value.isSendConMsg,"onUpdate:modelValue":l[7]||(l[7]=e=>O.value.isSendConMsg=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:b((()=>[(v(!0),m(w,null,_(D.value,((e,l)=>(v(),k(ne,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(u,{label:"客户号:",prop:"custId"},{default:b((()=>[f(re,{modelValue:O.value.custId,"onUpdate:modelValue":l[8]||(l[8]=e=>O.value.custId=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{A as default};

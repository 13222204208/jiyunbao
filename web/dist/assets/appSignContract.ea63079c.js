/*! 
 Build based on gin-vue-admin 
 Time : 1677739392000 */
import{g as e,d as l,u as a,q as t,b as s,a as o,c as u}from"./appSignContract.e6427b4c.js";import{f as i,a as n,g as d}from"./format.7121bf90.js";import{r,a as c,b as p,o as v,c as m,d as g,e as b,w as f,h as y,t as h,z as C,F as w,x as _,m as k,A as z,i as V}from"./index.533d8bbb.js";import"./date.34b11046.js";import"./dictionary.f9434c9f.js";import"./dictionary.a38b2399.js";import"./sysDictionary.dfe03bab.js";const I={class:"gva-search-box"},T={class:"gva-table-box"},S={class:"gva-btn-list"},x=g("p",null,"确定要删除吗？",-1),j={style:{"text-align":"right","margin-top":"8px"}},U=g("br",null,null,-1),M={class:"gva-pagination"},q={class:"dialog-footer"},A={name:"AppSignContract"},D=Object.assign(A,{setup(A){const D=r([]),O=r([]),B=r({reqId:"",certId:"",busOpenType:"",contractType:void 0,isSendConMsg:void 0,notifyUrl:"",custId:""}),F=c({contractType:[{required:!0,message:"",trigger:["input","blur"]}],isSendConMsg:[{required:!0,message:"",trigger:["input","blur"]}],custId:[{required:!0,message:"",trigger:["input","blur"]}]}),K=r(),R=r(1),E=r(0),G=r(10),H=r([]),J=r({}),L=r([]),N=()=>{J.value={}},P=()=>{R.value=1,G.value=10,X()},Q=e=>{G.value=e,X()},W=e=>{R.value=e,X()},X=async()=>{const l=await e({page:R.value,pageSize:G.value,...J.value});0===l.code&&(H.value=l.data.list,E.value=l.data.total,R.value=l.data.page,G.value=l.data.pageSize)};X();(async()=>{D.value=await d("contractType"),O.value=await d("isSendConMsg")})();const Y=r([]),Z=e=>{Y.value=e},$=r(!1),ee=async()=>{const e=[];if(0===Y.value.length)return void V({type:"warning",message:"请选择要删除的数据"});Y.value&&Y.value.map((l=>{e.push(l.ID)}));0===(await l({ids:e})).code&&(V({type:"success",message:"删除成功"}),H.value.length===e.length&&R.value>1&&R.value--,$.value=!1,X())},le=r(""),ae=async e=>{0===(await o({ID:e.ID})).code&&(V({type:"success",message:"删除成功"}),1===H.value.length&&R.value>1&&R.value--,X())},te=r(!1),se=()=>{le.value="create",te.value=!0},oe=()=>{te.value=!1,B.value={reqId:"",certId:"",busOpenType:"",contractType:void 0,isSendConMsg:void 0,notifyUrl:"",custId:""}},ue=async()=>{var e;null==(e=K.value)||e.validate((async e=>{console.log("提交的数据",L.value);let l,t=L.value,s=[];for(var o=0;o<t.length;o++)console.log("数据： ",t[o]),"扫码工作日到账"==t[o]&&s.push("00"),"扫码实时到账"==t[o]&&(console.log("第二 ",t[o]),s.push("01")),"刷卡工作日到账"==t[o]&&s.push("10"),"刷卡实时到账"==t[o]&&s.push("11"),"D1到账"==t[o]&&s.push("20");if(s.length>1?B.value.busOpenType=s.join("|"):B.value.busOpenType=s.toString(),console.log("挚友",B.value),e){switch(le.value){case"create":default:l=await u(B.value);break;case"update":l=await a(B.value)}0===l.code&&(V({type:"success",message:"创建/更改成功"}),oe(),X())}}))};return(e,l)=>{const o=p("el-date-picker"),u=p("el-form-item"),d=p("el-button"),r=p("el-form"),c=p("el-popover"),A=p("el-table-column"),X=p("el-table"),le=p("el-pagination"),ie=p("el-checkbox"),ne=p("el-checkbox-group"),de=p("el-option"),re=p("el-select"),ce=p("el-input"),pe=p("el-dialog");return v(),m("div",null,[g("div",I,[b(r,{inline:!0,model:J.value,class:"demo-form-inline"},{default:f((()=>[b(u,{label:"创建时间"},{default:f((()=>[b(o,{modelValue:J.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>J.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),y(" — "),b(o,{modelValue:J.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>J.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),b(u,null,{default:f((()=>[b(d,{size:"small",type:"primary",icon:"search",onClick:P},{default:f((()=>[y("查询")])),_:1}),b(d,{size:"small",icon:"refresh",onClick:N},{default:f((()=>[y("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),g("div",T,[g("div",S,[b(d,{size:"small",type:"primary",icon:"plus",onClick:se},{default:f((()=>[y("新增")])),_:1}),b(c,{visible:$.value,"onUpdate:visible":l[4]||(l[4]=e=>$.value=e),placement:"top",width:"160"},{reference:f((()=>[b(d,{icon:"delete",size:"small",style:{"margin-left":"10px"},disabled:!Y.value.length,onClick:l[3]||(l[3]=e=>$.value=!0)},{default:f((()=>[y("删除")])),_:1},8,["disabled"])])),default:f((()=>[x,g("div",j,[b(d,{size:"small",type:"primary",link:"",onClick:l[2]||(l[2]=e=>$.value=!1)},{default:f((()=>[y("取消")])),_:1}),b(d,{size:"small",type:"primary",onClick:ee},{default:f((()=>[y("确定")])),_:1})])])),_:1},8,["visible"])]),b(X,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:H.value,"row-key":"ID",onSelectionChange:Z},{default:f((()=>[b(A,{align:"left",label:"日期",width:"180"},{default:f((e=>[y(h(C(i)(e.row.CreatedAt)),1)])),_:1}),b(A,{align:"left",label:"流水号",prop:"reqId",width:"180"}),b(A,{align:"left",label:"商户号",prop:"mercId",width:"180"}),b(A,{align:"left",label:"合同类型",prop:"contractType",width:"120"},{default:f((e=>[y(h(C(n)(e.row.contractType,D.value)),1)])),_:1}),b(A,{align:"left",label:"签约通知",prop:"isSendConMsg",width:"120"},{default:f((e=>[y(h(C(n)(e.row.isSendConMsg,O.value)),1)])),_:1}),b(A,{align:"left",label:"客户号",prop:"custId",width:"180"}),b(A,{align:"left",label:"按钮组"},{default:f((e=>[b(d,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{const l=await a(e);0===l.code&&V({type:"success",message:l.msg})})(e.row)},{default:f((()=>[y("签约申请")])),_:2},1032,["onClick"]),b(d,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{const l=await t(e);0===l.code&&V({type:"success",message:l.msg})})(e.row)},{default:f((()=>[y("签约状态")])),_:2},1032,["onClick"]),U,b(d,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{const l=await s({mercId:e.mercId});if(0===l.code){let e="金额："+l.msg;z.alert(e,"商户总额",{confirmButtonText:"OK"})}})(e.row)},{default:f((()=>[y("余额查询")])),_:2},1032,["onClick"]),b(d,{type:"primary",link:"",icon:"delete",size:"small",onClick:l=>{return a=e.row,void z.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ae(a)}));var a}},{default:f((()=>[y("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),g("div",M,[b(le,{layout:"total, sizes, prev, pager, next, jumper","current-page":R.value,"page-size":G.value,"page-sizes":[10,30,50,100],total:E.value,onCurrentChange:W,onSizeChange:Q},null,8,["current-page","page-size","total"])])]),b(pe,{modelValue:te.value,"onUpdate:modelValue":l[9]||(l[9]=e=>te.value=e),"before-close":oe,title:"弹窗操作"},{footer:f((()=>[g("div",q,[b(d,{size:"small",onClick:oe},{default:f((()=>[y("取 消")])),_:1}),b(d,{size:"small",type:"primary",onClick:ue},{default:f((()=>[y("确 定")])),_:1})])])),default:f((()=>[b(r,{model:B.value,"label-position":"right",ref_key:"elFormRef",ref:K,rules:F,"label-width":"100px"},{default:f((()=>[b(u,{label:"到账方式:",prop:"busOpenType"},{default:f((()=>[b(ne,{modelValue:L.value,"onUpdate:modelValue":l[5]||(l[5]=e=>L.value=e)},{default:f((()=>[b(ie,{label:"扫码工作日到账",size:"large"}),b(ie,{label:"扫码实时到账",size:"large"}),b(ie,{label:"刷卡工作日到账",size:"large"}),b(ie,{label:"刷卡实时到账",size:"large"}),b(ie,{label:"D1到账 ",size:"large"})])),_:1},8,["modelValue"])])),_:1}),b(u,{label:"合同类型:",prop:"contractType"},{default:f((()=>[b(re,{modelValue:B.value.contractType,"onUpdate:modelValue":l[6]||(l[6]=e=>B.value.contractType=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:f((()=>[(v(!0),m(w,null,_(D.value,((e,l)=>(v(),k(de,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),b(u,{label:"签约通知:",prop:"isSendConMsg"},{default:f((()=>[b(re,{modelValue:B.value.isSendConMsg,"onUpdate:modelValue":l[7]||(l[7]=e=>B.value.isSendConMsg=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:f((()=>[(v(!0),m(w,null,_(O.value,((e,l)=>(v(),k(de,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),b(u,{label:"客户号:",prop:"custId"},{default:f((()=>[b(ce,{modelValue:B.value.custId,"onUpdate:modelValue":l[8]||(l[8]=e=>B.value.custId=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{D as default};

/*! 
 Build based on gin-vue-admin 
 Time : 1673519692000 */
import{g as e,d as l,f as a,a as t,c as o,u}from"./appUser.2de08b98.js";import{f as d,a as i,g as n}from"./format.9730cff4.js";import{r as s,a as r,b as p,o as c,c as m,d as v,e as f,w as h,h as b,F as y,x as g,m as V,t as k,z as _,A as C,i as w}from"./index.29e958a1.js";import"./date.34b11046.js";import"./dictionary.756c2897.js";import"./dictionary.90e3faa4.js";import"./sysDictionary.77e8fb14.js";const z={class:"gva-search-box"},j={class:"gva-table-box"},U={class:"gva-btn-list"},T=v("p",null,"确定要删除吗？",-1),I={style:{"text-align":"right","margin-top":"8px"}},x={class:"gva-pagination"},A={class:"dialog-footer"},D={name:"AppUser"},S=Object.assign(D,{setup(D){const S=s([]),B=s({nickname:"",phone:"",serviceId:0,joinCode:"",mchType:void 0,agreement:"",avatar:"",wechat:""}),F=r({}),M=s(),O=s(1),R=s(0),q=s(10),E=s([]),G=s({}),H=()=>{G.value={}},J=()=>{O.value=1,q.value=10,N()},K=e=>{q.value=e,N()},L=e=>{O.value=e,N()},N=async()=>{const l=await e({page:O.value,pageSize:q.value,...G.value});0===l.code&&(E.value=l.data.list,R.value=l.data.total,O.value=l.data.page,q.value=l.data.pageSize)};N();(async()=>{S.value=await n("mchType")})();const P=s([]),Q=e=>{P.value=e},W=s(!1),X=async()=>{const e=[];if(0===P.value.length)return void w({type:"warning",message:"请选择要删除的数据"});P.value&&P.value.map((l=>{e.push(l.ID)}));0===(await l({ids:e})).code&&(w({type:"success",message:"删除成功"}),E.value.length===e.length&&O.value>1&&O.value--,W.value=!1,N())},Y=s(""),Z=async e=>{const l=await a({ID:e.ID});Y.value="update",0===l.code&&(B.value=l.data.reappUser,ee.value=!0)},$=async e=>{0===(await t({ID:e.ID})).code&&(w({type:"success",message:"删除成功"}),1===E.value.length&&O.value>1&&O.value--,N())},ee=s(!1),le=()=>{Y.value="create",ee.value=!0},ae=()=>{ee.value=!1,B.value={nickname:"",phone:"",serviceId:0,joinCode:"",mchType:void 0,agreement:"",avatar:"",wechat:""}},te=async()=>{var e;null==(e=M.value)||e.validate((async e=>{if(!e)return;let l;switch(Y.value){case"create":default:l=await o(B.value);break;case"update":l=await u(B.value)}0===l.code&&(w({type:"success",message:"创建/更改成功"}),ae(),N())}))};return(e,l)=>{const a=p("el-date-picker"),t=p("el-form-item"),o=p("el-input"),u=p("el-option"),n=p("el-select"),s=p("el-button"),r=p("el-form"),w=p("el-popover"),D=p("el-table-column"),N=p("el-table"),Y=p("el-pagination"),oe=p("el-dialog");return c(),m("div",null,[v("div",z,[f(r,{inline:!0,model:G.value,class:"demo-form-inline"},{default:h((()=>[f(t,{label:"创建时间"},{default:h((()=>[f(a,{modelValue:G.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>G.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),b(" — "),f(a,{modelValue:G.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>G.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),f(t,{label:"昵称"},{default:h((()=>[f(o,{modelValue:G.value.nickname,"onUpdate:modelValue":l[2]||(l[2]=e=>G.value.nickname=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),f(t,{label:"服务机构"},{default:h((()=>[f(o,{modelValue:G.value.serviceId,"onUpdate:modelValue":l[3]||(l[3]=e=>G.value.serviceId=e),modelModifiers:{number:!0},placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),f(t,{label:"联保代码"},{default:h((()=>[f(o,{modelValue:G.value.joinCode,"onUpdate:modelValue":l[4]||(l[4]=e=>G.value.joinCode=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),f(t,{label:"商户类型",prop:"mchType"},{default:h((()=>[f(n,{modelValue:G.value.mchType,"onUpdate:modelValue":l[5]||(l[5]=e=>G.value.mchType=e),clearable:"",placeholder:"请选择",onClear:l[6]||(l[6]=()=>{G.value.mchType=void 0})},{default:h((()=>[(c(!0),m(y,null,g(S.value,((e,l)=>(c(),V(u,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(t,null,{default:h((()=>[f(s,{size:"small",type:"primary",icon:"search",onClick:J},{default:h((()=>[b("查询")])),_:1}),f(s,{size:"small",icon:"refresh",onClick:H},{default:h((()=>[b("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),v("div",j,[v("div",U,[f(s,{size:"small",type:"primary",icon:"plus",onClick:le},{default:h((()=>[b("新增")])),_:1}),f(w,{visible:W.value,"onUpdate:visible":l[9]||(l[9]=e=>W.value=e),placement:"top",width:"160"},{reference:h((()=>[f(s,{icon:"delete",size:"small",style:{"margin-left":"10px"},disabled:!P.value.length,onClick:l[8]||(l[8]=e=>W.value=!0)},{default:h((()=>[b("删除")])),_:1},8,["disabled"])])),default:h((()=>[T,v("div",I,[f(s,{size:"small",type:"primary",link:"",onClick:l[7]||(l[7]=e=>W.value=!1)},{default:h((()=>[b("取消")])),_:1}),f(s,{size:"small",type:"primary",onClick:X},{default:h((()=>[b("确定")])),_:1})])])),_:1},8,["visible"])]),f(N,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:E.value,"row-key":"ID",onSelectionChange:Q},{default:h((()=>[f(D,{align:"left",label:"日期",width:"180"},{default:h((e=>[b(k(_(d)(e.row.CreatedAt)),1)])),_:1}),f(D,{align:"left",label:"昵称",prop:"nickname",width:"120"}),f(D,{align:"left",label:"手机号",prop:"phone",width:"120"}),f(D,{align:"left",label:"服务机构",prop:"serviceId",width:"120"}),f(D,{align:"left",label:"联保代码",prop:"joinCode",width:"120"}),f(D,{align:"left",label:"商户类型",prop:"mchType",width:"120"},{default:h((e=>[b(k(_(i)(e.row.mchType,S.value)),1)])),_:1}),f(D,{align:"left",label:"按钮组"},{default:h((e=>[f(s,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>Z(e.row)},{default:h((()=>[b("变更")])),_:2},1032,["onClick"]),f(s,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>Z(e.row)},{default:h((()=>[b("商家认证")])),_:2},1032,["onClick"]),f(s,{type:"primary",link:"",icon:"delete",size:"small",onClick:l=>{return a=e.row,void C.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{$(a)}));var a}},{default:h((()=>[b("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),v("div",x,[f(Y,{layout:"total, sizes, prev, pager, next, jumper","current-page":O.value,"page-size":q.value,"page-sizes":[10,30,50,100],total:R.value,onCurrentChange:L,onSizeChange:K},null,8,["current-page","page-size","total"])])]),f(oe,{modelValue:ee.value,"onUpdate:modelValue":l[15]||(l[15]=e=>ee.value=e),"before-close":ae,title:"弹窗操作"},{footer:h((()=>[v("div",A,[f(s,{size:"small",onClick:ae},{default:h((()=>[b("取 消")])),_:1}),f(s,{size:"small",type:"primary",onClick:te},{default:h((()=>[b("确 定")])),_:1})])])),default:h((()=>[f(r,{model:B.value,"label-position":"right",ref_key:"elFormRef",ref:M,rules:F,"label-width":"120px"},{default:h((()=>[f(t,{label:"昵称:",prop:"nickname"},{default:h((()=>[f(o,{modelValue:B.value.nickname,"onUpdate:modelValue":l[10]||(l[10]=e=>B.value.nickname=e),clearable:!1,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(t,{label:"手机号:",prop:"phone"},{default:h((()=>[f(o,{modelValue:B.value.phone,"onUpdate:modelValue":l[11]||(l[11]=e=>B.value.phone=e),clearable:!1,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(t,{label:"服务机构:",prop:"serviceId"},{default:h((()=>[f(o,{modelValue:B.value.serviceId,"onUpdate:modelValue":l[12]||(l[12]=e=>B.value.serviceId=e),modelModifiers:{number:!0},clearable:!1,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(t,{label:"联保代码:",prop:"joinCode"},{default:h((()=>[f(o,{modelValue:B.value.joinCode,"onUpdate:modelValue":l[13]||(l[13]=e=>B.value.joinCode=e),clearable:!1,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(t,{label:"商户类型:",prop:"mchType"},{default:h((()=>[f(n,{modelValue:B.value.mchType,"onUpdate:modelValue":l[14]||(l[14]=e=>B.value.mchType=e),placeholder:"请选择",style:{width:"100%"},clearable:!1},{default:h((()=>[(c(!0),m(y,null,g(S.value,((e,l)=>(c(),V(u,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{S as default};

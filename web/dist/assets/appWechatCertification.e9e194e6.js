/*! 
 Build based on gin-vue-admin 
 Time : 1677739392000 */
import{g as e,d as a,f as l,c as t,a as o,b as i,w as s,e as d,h as n,u}from"./appWechatCertification.f4eac258.js";import{f as r,a as c,g as m}from"./format.7121bf90.js";import{r as p,a as v,b as g,o as y,c as f,d as b,e as h,w,h as C,t as k,z as I,F as _,x as V,m as z,A as T,i as D}from"./index.533d8bbb.js";import"./date.34b11046.js";import"./dictionary.f9434c9f.js";import"./dictionary.a38b2399.js";import"./sysDictionary.dfe03bab.js";const x={class:"gva-search-box"},A={class:"gva-table-box"},N={class:"gva-btn-list"},j=b("p",null,"确定要删除吗？",-1),U={style:{"text-align":"right","margin-top":"8px"}},q=b("br",null,null,-1),B={class:"gva-pagination"},F={class:"dialog-footer"},S={name:"AppWechatCertification"},W=Object.assign(S,{setup(S){const W=p([]),E=p([]),L=p({reqId:"",mercId:"",mercName:"",idTypeCd:"",idFrontImg:"",idBackImg:"",contIdValidDateBegin:"",contIdValidDateEnd:"",contactCorpId:"",idAddress:"",merContactType:65,managementType:1,storeName:"",busAutLetterImg:"",qrcodeData:""}),O=p("data:image/png;base64,");console.log("图片",O);const R=v({mercId:[{required:!0,message:"",trigger:["input","blur"]}]}),G=p(),H=p(1),J=p(0),K=p(10),M=p([]),P=p({}),Q=()=>{P.value={}},X=()=>{H.value=1,K.value=10,$()},Y=e=>{K.value=e,$()},Z=e=>{H.value=e,$()},$=async()=>{const a=await e({page:H.value,pageSize:K.value,...P.value});0===a.code&&(M.value=a.data.list,J.value=a.data.total,H.value=a.data.page,K.value=a.data.pageSize)};$();(async()=>{W.value=await m("merContactType"),E.value=await m("managementType\t")})();const ee=p([]),ae=e=>{ee.value=e},le=p(!1),te=async()=>{const e=[];if(0===ee.value.length)return void D({type:"warning",message:"请选择要删除的数据"});ee.value&&ee.value.map((a=>{e.push(a.ID)}));0===(await a({ids:e})).code&&(D({type:"success",message:"删除成功"}),M.value.length===e.length&&H.value>1&&H.value--,le.value=!1,$())},oe=p(""),ie=async e=>{0===(await d({ID:e.ID})).code&&(D({type:"success",message:"删除成功"}),1===M.value.length&&H.value>1&&H.value--,$())},se=p(!1),de=()=>{oe.value="create",se.value=!0},ne=()=>{se.value=!1,L.value={reqId:"",mercId:"",mercName:"",idTypeCd:"",idFrontImg:"",idBackImg:"",contIdValidDateBegin:"",contIdValidDateEnd:"",contactCorpId:"",idAddress:"",merContactType:void 0,managementType:void 0,storeName:"",busAutLetterImg:""}},ue=async()=>{var e;null==(e=G.value)||e.validate((async e=>{if(!e)return;let a;switch(oe.value){case"create":default:a=await n(L.value);break;case"update":a=await u(L.value)}0===a.code&&(D({type:"success",message:"创建/更改成功"}),ne(),$())}))};return(e,a)=>{const d=g("el-date-picker"),n=g("el-form-item"),u=g("el-input"),m=g("el-button"),p=g("el-form"),v=g("el-popover"),S=g("el-table-column"),$=g("el-image"),re=g("el-table"),ce=g("el-pagination"),me=g("el-option"),pe=g("el-select"),ve=g("el-dialog");return y(),f("div",null,[b("div",x,[h(p,{inline:!0,model:P.value,class:"demo-form-inline"},{default:w((()=>[h(n,{label:"创建时间"},{default:w((()=>[h(d,{modelValue:P.value.startCreatedAt,"onUpdate:modelValue":a[0]||(a[0]=e=>P.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),C(" — "),h(d,{modelValue:P.value.endCreatedAt,"onUpdate:modelValue":a[1]||(a[1]=e=>P.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),h(n,{label:"商户号"},{default:w((()=>[h(u,{modelValue:P.value.mercId,"onUpdate:modelValue":a[2]||(a[2]=e=>P.value.mercId=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),h(n,null,{default:w((()=>[h(m,{size:"small",type:"primary",icon:"search",onClick:X},{default:w((()=>[C("查询")])),_:1}),h(m,{size:"small",icon:"refresh",onClick:Q},{default:w((()=>[C("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),b("div",A,[b("div",N,[h(m,{size:"small",type:"primary",icon:"plus",onClick:de},{default:w((()=>[C("新增")])),_:1}),h(v,{visible:le.value,"onUpdate:visible":a[5]||(a[5]=e=>le.value=e),placement:"top",width:"160"},{reference:w((()=>[h(m,{icon:"delete",size:"small",style:{"margin-left":"10px"},disabled:!ee.value.length,onClick:a[4]||(a[4]=e=>le.value=!0)},{default:w((()=>[C("删除")])),_:1},8,["disabled"])])),default:w((()=>[j,b("div",U,[h(m,{size:"small",type:"primary",link:"",onClick:a[3]||(a[3]=e=>le.value=!1)},{default:w((()=>[C("取消")])),_:1}),h(m,{size:"small",type:"primary",onClick:te},{default:w((()=>[C("确定")])),_:1})])])),_:1},8,["visible"])]),h(re,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:M.value,"row-key":"ID",onSelectionChange:ae},{default:w((()=>[h(S,{type:"selection",width:"55"}),h(S,{align:"left",label:"日期",width:"180"},{default:w((e=>[C(k(I(r)(e.row.CreatedAt)),1)])),_:1}),h(S,{align:"left",label:"流水号",prop:"reqId",width:"120"}),h(S,{align:"left",label:"商户号",prop:"mercId",width:"120"}),h(S,{align:"left",label:"商户名称",prop:"mercName",width:"120"}),h(S,{align:"left",prop:"qrcodeData",label:"小程序码",width:"180"},{default:w((e=>[h($,{style:{width:"70%"},src:O.value+e.row.qrcodeData},null,8,["src"])])),_:1}),h(S,{align:"left",label:"法人居住地址",prop:"idAddress",width:"120"}),h(S,{align:"left",label:"联系人类型",prop:"merContactType",width:"120"},{default:w((e=>[C(k(I(c)(e.row.merContactType,W.value)),1)])),_:1}),h(S,{align:"left",label:"小微经营类型",prop:"managementType",width:"120"},{default:w((e=>[C(k(I(c)(e.row.managementType,E.value)),1)])),_:1}),h(S,{align:"left",label:"门店名称",prop:"storeName",width:"120"}),h(S,{align:"left",fixed:"right",label:"按钮组",width:"240"},{default:w((e=>[h(m,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:a=>(async e=>{const a=await s({ID:e.ID});0===a.code&&D({type:"success",message:a.msg})})(e.row)},{default:w((()=>[C("实名认证")])),_:2},1032,["onClick"]),h(m,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:a=>(async e=>{const a=await o({mercId:e.mercId});0===a.code&&D({type:"success",message:a.msg})})(e.row)},{default:w((()=>[C("明细信息")])),_:2},1032,["onClick"]),h(m,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:a=>(async e=>{const a=await l({ID:e.ID});oe.value="update",0===a.code&&(L.value=a.data.reappWechatCertification,se.value=!0)})(e.row)},{default:w((()=>[C("变更")])),_:2},1032,["onClick"]),q,h(m,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:a=>(async e=>{let a=e.applyNo;if(""==a)return void D({type:"warning",message:"申请单编号不能为空"});const l=await t({applyNo:a});0===l.code&&D({type:"success",message:l.msg})})(e.row)},{default:w((()=>[C("申请状态")])),_:2},1032,["onClick"]),h(m,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:a=>(async e=>{const a=await i({mercId:e.mercId});0===a.code&&D({type:"success",message:a.msg})})(e.row)},{default:w((()=>[C("授权状态")])),_:2},1032,["onClick"]),h(m,{type:"primary",link:"",icon:"delete",size:"small",onClick:a=>{return l=e.row,void T.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ie(l)}));var l}},{default:w((()=>[C("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),b("div",B,[h(ce,{layout:"total, sizes, prev, pager, next, jumper","current-page":H.value,"page-size":K.value,"page-sizes":[10,30,50,100],total:J.value,onCurrentChange:Z,onSizeChange:Y},null,8,["current-page","page-size","total"])])]),h(ve,{modelValue:se.value,"onUpdate:modelValue":a[10]||(a[10]=e=>se.value=e),"before-close":ne,title:"弹窗操作"},{footer:w((()=>[b("div",F,[h(m,{size:"small",onClick:ne},{default:w((()=>[C("取 消")])),_:1}),h(m,{size:"small",type:"primary",onClick:ue},{default:w((()=>[C("确 定")])),_:1})])])),default:w((()=>[h(p,{model:L.value,"label-position":"right",ref_key:"elFormRef",ref:G,rules:R,"label-width":"120px"},{default:w((()=>[h(n,{label:"商户号:",prop:"mercId"},{default:w((()=>[h(u,{modelValue:L.value.mercId,"onUpdate:modelValue":a[6]||(a[6]=e=>L.value.mercId=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),h(n,{label:"联系人类型:",prop:"merContactType"},{default:w((()=>[h(pe,{modelValue:L.value.merContactType,"onUpdate:modelValue":a[7]||(a[7]=e=>L.value.merContactType=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:w((()=>[(y(!0),f(_,null,V(W.value,((e,a)=>(y(),z(me,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),h(n,{label:"小微经营类型:",prop:"managementType"},{default:w((()=>[h(pe,{modelValue:L.value.managementType,"onUpdate:modelValue":a[8]||(a[8]=e=>L.value.managementType=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:w((()=>[(y(!0),f(_,null,V(E.value,((e,a)=>(y(),z(me,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),h(n,{label:"门店名称:",prop:"storeName"},{default:w((()=>[h(u,{modelValue:L.value.storeName,"onUpdate:modelValue":a[9]||(a[9]=e=>L.value.storeName=e),clearable:!0,placeholder:"小微商户必填"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{W as default};

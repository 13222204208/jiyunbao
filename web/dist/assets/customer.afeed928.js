/*! 
 Build based on gin-vue-admin 
 Time : 1675935707000 */
import{s as e,r as a,b as l,o as t,c as o,e as s,d as u,w as i,h as r,t as d,z as m,i as n}from"./index.3b117381.js";import{W as c}from"./warningBar.ee37cb1e.js";import{f as p}from"./format.a5b70b7c.js";import"./date.34b11046.js";import"./dictionary.c64483b9.js";import"./dictionary.2e4ec8e3.js";import"./sysDictionary.3083fcf3.js";const v=a=>e({url:"/customer/customer",method:"post",data:a}),f={class:"gva-table-box"},g={class:"gva-btn-list"},b=u("p",null,"确定要删除吗？",-1),y={style:{"text-align":"right","margin-top":"8px"}},h={class:"gva-pagination"},w={class:"dialog-footer"},k={name:"Customer"},C=Object.assign(k,{setup(k){const C=a({customerName:"",customerPhoneData:""}),z=a(1),_=a(0),V=a(10),D=a([]),j=e=>{V.value=e,I()},x=e=>{z.value=e,I()},I=async()=>{const a=await(l={page:z.value,pageSize:V.value},e({url:"/customer/customerList",method:"get",params:l}));var l;0===a.code&&(D.value=a.data.list,_.value=a.data.total,z.value=a.data.page,V.value=a.data.pageSize)};I();const U=a(!1),N=a(""),P=async a=>{const l=await(t={ID:a.ID},e({url:"/customer/customer",method:"get",params:t}));var t;N.value="update",0===l.code&&(C.value=l.data.customer,U.value=!0)},S=()=>{U.value=!1,C.value={customerName:"",customerPhoneData:""}},A=async a=>{a.visible=!1;var l;0===(await(l={ID:a.ID},e({url:"/customer/customer",method:"delete",data:l}))).code&&(n({type:"success",message:"删除成功"}),1===D.value.length&&z.value>1&&z.value--,I())},B=async()=>{let a;switch(N.value){case"create":default:a=await v(C.value);break;case"update":a=await(l=C.value,e({url:"/customer/customer",method:"put",data:l}))}var l;0===a.code&&(S(),I())},L=()=>{N.value="create",U.value=!0};return(e,a)=>{const n=l("el-button"),v=l("el-table-column"),k=l("el-popover"),I=l("el-table"),N=l("el-pagination"),O=l("el-input"),T=l("el-form-item"),W=l("el-form"),q=l("el-dialog");return t(),o("div",null,[s(c,{title:"在资源权限中将此角色的资源权限清空 或者不包含创建者的角色 即可屏蔽此客户资源的显示"}),u("div",f,[u("div",g,[s(n,{size:"small",type:"primary",icon:"plus",onClick:L},{default:i((()=>[r("新增")])),_:1})]),s(I,{ref:"multipleTable",data:D.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID"},{default:i((()=>[s(v,{type:"selection",width:"55"}),s(v,{align:"left",label:"接入日期",width:"180"},{default:i((e=>[u("span",null,d(m(p)(e.row.CreatedAt)),1)])),_:1}),s(v,{align:"left",label:"姓名",prop:"customerName",width:"120"}),s(v,{align:"left",label:"电话",prop:"customerPhoneData",width:"120"}),s(v,{align:"left",label:"接入人ID",prop:"sysUserId",width:"120"}),s(v,{align:"left",label:"按钮组","min-width":"160"},{default:i((e=>[s(n,{size:"small",type:"primary",link:"",icon:"edit",onClick:a=>P(e.row)},{default:i((()=>[r("变更")])),_:2},1032,["onClick"]),s(k,{modelValue:e.row.visible,"onUpdate:modelValue":a=>e.row.visible=a,placement:"top",width:"160"},{reference:i((()=>[s(n,{type:"primary",link:"",icon:"delete",size:"small",onClick:a=>e.row.visible=!0},{default:i((()=>[r("删除")])),_:2},1032,["onClick"])])),default:i((()=>[b,u("div",y,[s(n,{size:"small",type:"primary",link:"",onClick:a=>e.row.visible=!1},{default:i((()=>[r("取消")])),_:2},1032,["onClick"]),s(n,{type:"primary",size:"small",onClick:a=>A(e.row)},{default:i((()=>[r("确定")])),_:2},1032,["onClick"])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),u("div",h,[s(N,{"current-page":z.value,"page-size":V.value,"page-sizes":[10,30,50,100],total:_.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:x,onSizeChange:j},null,8,["current-page","page-size","total"])])]),s(q,{modelValue:U.value,"onUpdate:modelValue":a[2]||(a[2]=e=>U.value=e),"before-close":S,title:"客户"},{footer:i((()=>[u("div",w,[s(n,{size:"small",onClick:S},{default:i((()=>[r("取 消")])),_:1}),s(n,{size:"small",type:"primary",onClick:B},{default:i((()=>[r("确 定")])),_:1})])])),default:i((()=>[s(W,{inline:!0,model:C.value,"label-width":"80px"},{default:i((()=>[s(T,{label:"客户名"},{default:i((()=>[s(O,{modelValue:C.value.customerName,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value.customerName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),s(T,{label:"客户电话"},{default:i((()=>[s(O,{modelValue:C.value.customerPhoneData,"onUpdate:modelValue":a[1]||(a[1]=e=>C.value.customerPhoneData=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{C as default};

/*! 
 Build based on gin-vue-admin 
 Time : 1675228064000 */
import{s as a}from"./authority.7ea3d98e.js";import{W as e}from"./warningBar.05f9d88c.js";import{r as t,b as l,o as r,c as o,d as u,e as i,w as s,h as n,F as d,x as c,m as h,t as y,i as f}from"./index.6ee4fc76.js";const m={class:"clearfix sticky-button",style:{margin:"18px"}},p={class:"tree-content"},v={name:"Datas"},I=Object.assign(v,{props:{row:{default:function(){return{}},type:Object},authority:{default:function(){return[]},type:Array}},emits:["changeRow"],setup(v,{expose:I,emit:w}){const g=v,x=t([]),b=t(!1),k=a=>{a&&a.forEach((a=>{const e={};e.authorityId=a.authorityId,e.authorityName=a.authorityName,x.value.push(e),a.children&&a.children.length&&k(a.children)}))},A=t([]);k(g.authority),g.row.dataAuthorityId&&g.row.dataAuthorityId.forEach((a=>{const e=x.value&&x.value.filter((e=>e.authorityId===a.authorityId))&&x.value.filter((e=>e.authorityId===a.authorityId))[0];A.value.push(e)}));const C=()=>{A.value=[...x.value],w("changeRow","dataAuthorityId",A.value),b.value=!0},_=()=>{A.value=x.value.filter((a=>a.authorityId===g.row.authorityId)),w("changeRow","dataAuthorityId",A.value),b.value=!0},j=()=>{const a=[];R(g.row,a),A.value=x.value.filter((e=>a.indexOf(e.authorityId)>-1)),w("changeRow","dataAuthorityId",A.value),b.value=!0},R=(a,e)=>{e.push(a.authorityId),a.children&&a.children.forEach((a=>{R(a,e)}))},z=async()=>{0===(await a(g.row)).code&&f({type:"success",message:"资源设置成功"})},N=()=>{w("changeRow","dataAuthorityId",A.value),b.value=!0};return I({enterAndNext:()=>{z()},needConfirm:b}),(a,t)=>{const f=l("el-button"),v=l("el-checkbox"),I=l("el-checkbox-group");return r(),o("div",null,[u("div",m,[i(f,{class:"fl-right",size:"small",type:"primary",onClick:z},{default:s((()=>[n("确 定")])),_:1}),i(f,{class:"fl-left",size:"small",type:"primary",onClick:C},{default:s((()=>[n("全选")])),_:1}),i(f,{class:"fl-left",size:"small",type:"primary",onClick:_},{default:s((()=>[n("本角色")])),_:1}),i(f,{class:"fl-left",size:"small",type:"primary",onClick:j},{default:s((()=>[n("本角色及子角色")])),_:1})]),u("div",p,[i(I,{modelValue:A.value,"onUpdate:modelValue":t[0]||(t[0]=a=>A.value=a),onChange:N},{default:s((()=>[(r(!0),o(d,null,c(x.value,((a,e)=>(r(),h(v,{key:e,label:a},{default:s((()=>[n(y(a.authorityName),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])]),i(e,{title:"此功能仅用于创建角色和角色的many2many关系表，具体使用还须自己结合表实现业务，详情参考示例代码（客户示例）"})])}}});export{I as default};

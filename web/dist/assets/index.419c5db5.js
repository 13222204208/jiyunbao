/*! 
 Build based on gin-vue-admin 
 Time : 1675228064000 */
import{f as a,h as e,r as t}from"./autoCode.dd30adfb.js";import{_ as l,u as i,r as n,b as s,o,c as r,d as c,e as d,w as u,h as p,t as m,z as f,m as g,A as y,i as b}from"./index.6ee4fc76.js";import{f as w}from"./format.18479661.js";import"./date.34b11046.js";import"./dictionary.48efcc1b.js";import"./dictionary.48a09a1f.js";import"./sysDictionary.43866835.js";const v={class:"gva-table-box"},h={class:"gva-btn-list"},C={class:"gva-pagination"},k={name:"AutoCodeAdmin"},z=l(Object.assign(k,{setup(l){const k=i(),z=n(1),x=n(0),_=n(10),T=n([]),B=a=>{_.value=a,N()},j=a=>{z.value=a,N()},N=async()=>{const e=await a({page:z.value,pageSize:_.value});0===e.code&&(T.value=e.data.list,x.value=e.data.total,z.value=e.data.page,_.value=e.data.pageSize)};N();const D=async(a,e)=>{e?y.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{y.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{y.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await t({id:Number(a.ID),deleteTable:e})).code&&(b.success("回滚成功"),N())}))}))})):y.confirm("此操作将删除自动创建的文件和api, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await t({id:Number(a.ID),deleteTable:e})).code&&(b.success("回滚成功"),N())}))},I=a=>{a?k.push({name:"autoCodeEdit",params:{id:a.ID}}):k.push({name:"autoCode"})};return(a,t)=>{const l=s("el-button"),i=s("el-table-column"),n=s("el-tag"),k=s("el-table"),A=s("el-pagination");return o(),r("div",null,[c("div",v,[c("div",h,[d(l,{size:"small",type:"primary",icon:"plus",onClick:t[0]||(t[0]=a=>I(null))},{default:u((()=>[p("新增")])),_:1})]),d(k,{data:T.value},{default:u((()=>[d(i,{type:"selection",width:"55"}),d(i,{align:"left",label:"id",width:"60",prop:"ID"}),d(i,{align:"left",label:"日期",width:"180"},{default:u((a=>[p(m(f(w)(a.row.CreatedAt)),1)])),_:1}),d(i,{align:"left",label:"结构体名","min-width":"150",prop:"structName"}),d(i,{align:"left",label:"结构体描述","min-width":"150",prop:"structCNName"}),d(i,{align:"left",label:"表名称","min-width":"150",prop:"tableName"}),d(i,{align:"left",label:"回滚标记","min-width":"150",prop:"flag"},{default:u((a=>[a.row.flag?(o(),g(n,{key:0,type:"danger",size:"small",effect:"dark"},{default:u((()=>[p(" 已回滚 ")])),_:1})):(o(),g(n,{key:1,size:"small",type:"success",effect:"dark"},{default:u((()=>[p(" 未回滚 ")])),_:1}))])),_:1}),d(i,{align:"left",label:"操作","min-width":"240"},{default:u((a=>[c("div",null,[d(l,{size:"small",type:"primary",link:"",disabled:1===a.row.flag,onClick:e=>D(a.row,!0)},{default:u((()=>[p("回滚(删表)")])),_:2},1032,["disabled","onClick"]),d(l,{size:"small",type:"primary",link:"",disabled:1===a.row.flag,onClick:e=>D(a.row,!1)},{default:u((()=>[p("回滚(不删表)")])),_:2},1032,["disabled","onClick"]),d(l,{size:"small",type:"primary",link:"",onClick:e=>I(a.row)},{default:u((()=>[p("复用")])),_:2},1032,["onClick"]),d(l,{size:"small",type:"primary",link:"",onClick:t=>(async a=>{y.confirm("此操作将删除本历史, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await e({id:Number(a.ID)})).code&&(b.success("删除成功"),N())}))})(a.row)},{default:u((()=>[p("删除")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),c("div",C,[d(A,{"current-page":z.value,"page-size":_.value,"page-sizes":[10,30,50,100],total:x.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:j,onSizeChange:B},null,8,["current-page","page-size","total"])])])])}}}),[["__scopeId","data-v-90add0cc"]]);export{z as default};

/*! 
 Build based on gin-vue-admin 
 Time : 1677739392000 */
import{g as e,d as l,f as a,a as t,c as i,u}from"./miniSet.ef0296b0.js";import{f as o,a as d,g as p}from"./format.7121bf90.js";import{r,a as n,b as s,o as c,c as m,d as v,e as f,w as b,h as g,t as y,z as h,F as V,x as w,m as _,A as k,i as C}from"./index.533d8bbb.js";import"./date.34b11046.js";import"./dictionary.f9434c9f.js";import"./dictionary.a38b2399.js";import"./sysDictionary.dfe03bab.js";const z={class:"gva-search-box"},S={class:"gva-table-box"},I={class:"gva-btn-list"},x=v("p",null,"确定要删除吗？",-1),U={style:{"text-align":"right","margin-top":"8px"}},T={class:"gva-pagination"},j={class:"dialog-footer"},A={name:"MiniSet"},D=Object.assign(A,{setup(A){const D=r([]),N=r({miniType:void 0,appid:"",appSecret:"",mchId:"",mchSecret:"",walletNotice:"",public:"",private:""}),B=n({miniType:[{required:!0,message:"",trigger:["input","blur"]}]}),F=r(),q=r(1),M=r(0),O=r(10),R=r([]),E=r({}),G=()=>{E.value={}},H=()=>{q.value=1,O.value=10,L()},J=e=>{O.value=e,L()},K=e=>{q.value=e,L()},L=async()=>{const l=await e({page:q.value,pageSize:O.value,...E.value});0===l.code&&(R.value=l.data.list,M.value=l.data.total,q.value=l.data.page,O.value=l.data.pageSize)};L();(async()=>{D.value=await p("mini")})();const P=r([]),Q=e=>{P.value=e},W=r(!1),X=async()=>{const e=[];if(0===P.value.length)return void C({type:"warning",message:"请选择要删除的数据"});P.value&&P.value.map((l=>{e.push(l.ID)}));0===(await l({ids:e})).code&&(C({type:"success",message:"删除成功"}),R.value.length===e.length&&q.value>1&&q.value--,W.value=!1,L())},Y=r(""),Z=async e=>{0===(await t({ID:e.ID})).code&&(C({type:"success",message:"删除成功"}),1===R.value.length&&q.value>1&&q.value--,L())},$=r(!1),ee=()=>{Y.value="create",$.value=!0},le=()=>{$.value=!1,N.value={miniType:void 0,appid:"",appSecret:"",walletNotice:"",mchId:"",mchSecret:"",public:"",private:""}},ae=async()=>{var e;null==(e=F.value)||e.validate((async e=>{if(!e)return;let l;switch(Y.value){case"create":default:l=await i(N.value);break;case"update":l=await u(N.value)}0===l.code&&(C({type:"success",message:"创建/更改成功"}),le(),L())}))};return(e,l)=>{const t=s("el-date-picker"),i=s("el-form-item"),u=s("el-button"),p=s("el-form"),r=s("el-popover"),n=s("el-table-column"),C=s("el-table"),A=s("el-pagination"),L=s("el-option"),te=s("el-select"),ie=s("el-input"),ue=s("el-dialog");return c(),m("div",null,[v("div",z,[f(p,{inline:!0,model:E.value,class:"demo-form-inline"},{default:b((()=>[f(i,{label:"创建时间"},{default:b((()=>[f(t,{modelValue:E.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>E.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),g(" — "),f(t,{modelValue:E.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>E.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),f(i,null,{default:b((()=>[f(u,{size:"small",type:"primary",icon:"search",onClick:H},{default:b((()=>[g("查询")])),_:1}),f(u,{size:"small",icon:"refresh",onClick:G},{default:b((()=>[g("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),v("div",S,[v("div",I,[f(u,{size:"small",type:"primary",icon:"plus",onClick:ee},{default:b((()=>[g("新增")])),_:1}),f(r,{visible:W.value,"onUpdate:visible":l[4]||(l[4]=e=>W.value=e),placement:"top",width:"160"},{reference:b((()=>[f(u,{icon:"delete",size:"small",style:{"margin-left":"10px"},disabled:!P.value.length,onClick:l[3]||(l[3]=e=>W.value=!0)},{default:b((()=>[g("删除")])),_:1},8,["disabled"])])),default:b((()=>[x,v("div",U,[f(u,{size:"small",type:"primary",link:"",onClick:l[2]||(l[2]=e=>W.value=!1)},{default:b((()=>[g("取消")])),_:1}),f(u,{size:"small",type:"primary",onClick:X},{default:b((()=>[g("确定")])),_:1})])])),_:1},8,["visible"])]),f(C,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:R.value,"row-key":"ID",onSelectionChange:Q},{default:b((()=>[f(n,{align:"left",label:"日期",width:"180"},{default:b((e=>[g(y(h(o)(e.row.CreatedAt)),1)])),_:1}),f(n,{align:"left",label:"小程序类型",prop:"miniType",width:"120"},{default:b((e=>[g(y(h(d)(e.row.miniType,D.value)),1)])),_:1}),f(n,{align:"left",label:"AppId",prop:"appid",width:"120"}),f(n,{align:"left",label:"商户号",prop:"mchId",width:"120"}),f(n,{align:"left",label:"钱包公告",prop:"walletNotice",width:"120"}),f(n,{align:"left",label:"按钮组"},{default:b((e=>[f(u,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{const l=await a({ID:e.ID});Y.value="update",0===l.code&&(N.value=l.data.reminiSet,$.value=!0)})(e.row)},{default:b((()=>[g("变更")])),_:2},1032,["onClick"]),f(u,{type:"primary",link:"",icon:"delete",size:"small",onClick:l=>{return a=e.row,void k.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{Z(a)}));var a}},{default:b((()=>[g("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),v("div",T,[f(A,{layout:"total, sizes, prev, pager, next, jumper","current-page":q.value,"page-size":O.value,"page-sizes":[10,30,50,100],total:M.value,onCurrentChange:K,onSizeChange:J},null,8,["current-page","page-size","total"])])]),f(ue,{modelValue:$.value,"onUpdate:modelValue":l[13]||(l[13]=e=>$.value=e),"before-close":le,title:"弹窗操作"},{footer:b((()=>[v("div",j,[f(u,{size:"small",onClick:le},{default:b((()=>[g("取 消")])),_:1}),f(u,{size:"small",type:"primary",onClick:ae},{default:b((()=>[g("确 定")])),_:1})])])),default:b((()=>[f(p,{model:N.value,"label-position":"right",ref_key:"elFormRef",ref:F,rules:B,"label-width":"150px"},{default:b((()=>[f(i,{label:"小程序类型:",prop:"miniType"},{default:b((()=>[f(te,{modelValue:N.value.miniType,"onUpdate:modelValue":l[5]||(l[5]=e=>N.value.miniType=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:b((()=>[(c(!0),m(V,null,w(D.value,((e,l)=>(c(),_(L,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(i,{label:"AppId:",prop:"appid"},{default:b((()=>[f(ie,{modelValue:N.value.appid,"onUpdate:modelValue":l[6]||(l[6]=e=>N.value.appid=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(i,{label:"我的钱包公告:",prop:"walletNotice"},{default:b((()=>[f(ie,{modelValue:N.value.walletNotice,"onUpdate:modelValue":l[7]||(l[7]=e=>N.value.walletNotice=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(i,{label:"秘匙:",prop:"appSecret"},{default:b((()=>[f(ie,{modelValue:N.value.appSecret,"onUpdate:modelValue":l[8]||(l[8]=e=>N.value.appSecret=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(i,{label:"商户号:",prop:"mchId"},{default:b((()=>[f(ie,{modelValue:N.value.mchId,"onUpdate:modelValue":l[9]||(l[9]=e=>N.value.mchId=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(i,{label:"支付秘钥:",prop:"mchSecret"},{default:b((()=>[f(ie,{modelValue:N.value.mchSecret,"onUpdate:modelValue":l[10]||(l[10]=e=>N.value.mchSecret=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(i,{label:"公钥:",prop:"public"},{default:b((()=>[f(ie,{modelValue:N.value.public,"onUpdate:modelValue":l[11]||(l[11]=e=>N.value.public=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(i,{label:"私钥:",prop:"private"},{default:b((()=>[f(ie,{modelValue:N.value.private,"onUpdate:modelValue":l[12]||(l[12]=e=>N.value.private=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{D as default};

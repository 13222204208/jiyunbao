/*! 
 Build based on gin-vue-admin 
 Time : 1675228064000 */
import{g as e,d as l,f as a,a as t,c as u,u as o}from"./miniUser.b4457092.js";import{f as i,a as d,g as n}from"./format.18479661.js";import{r,a as s,b as p,o as m,c as v,d as c,e as f,w as b,h as y,t as g,z as h,F as V,x as _,m as w,A as k,i as C}from"./index.6ee4fc76.js";import"./date.34b11046.js";import"./dictionary.48efcc1b.js";import"./dictionary.48a09a1f.js";import"./sysDictionary.43866835.js";const z={class:"gva-search-box"},N={class:"gva-table-box"},U={class:"gva-btn-list"},x=c("p",null,"确定要删除吗？",-1),S={style:{"text-align":"right","margin-top":"8px"}},T={class:"gva-pagination"},j={class:"dialog-footer"},D={name:"MiniUser"},A=Object.assign(D,{setup(D){const A=r([]),I=r([]),B=r({nickname:"",avatar:"",userNum:"",miniType:void 0,openid:"",phone:"",realNameState:void 0}),F=s({}),M=r(),O=r(1),R=r(0),q=r(10),E=r([]),G=r({}),H=()=>{G.value={}},J=()=>{O.value=1,q.value=10,P()},K=e=>{q.value=e,P()},L=e=>{O.value=e,P()},P=async()=>{const l=await e({page:O.value,pageSize:q.value,...G.value});0===l.code&&(E.value=l.data.list,R.value=l.data.total,O.value=l.data.page,q.value=l.data.pageSize)};P();(async()=>{A.value=await n("mini"),I.value=await n("realNameState")})();const Q=r([]),W=e=>{Q.value=e},X=r(!1),Y=async()=>{const e=[];if(0===Q.value.length)return void C({type:"warning",message:"请选择要删除的数据"});Q.value&&Q.value.map((l=>{e.push(l.ID)}));0===(await l({ids:e})).code&&(C({type:"success",message:"删除成功"}),E.value.length===e.length&&O.value>1&&O.value--,X.value=!1,P())},Z=r(""),$=async e=>{0===(await t({ID:e.ID})).code&&(C({type:"success",message:"删除成功"}),1===E.value.length&&O.value>1&&O.value--,P())},ee=r(!1),le=()=>{Z.value="create",ee.value=!0},ae=()=>{ee.value=!1,B.value={nickname:"",avatar:"",userNum:"",miniType:void 0,openid:"",phone:"",realNameState:void 0}},te=async()=>{var e;null==(e=M.value)||e.validate((async e=>{if(!e)return;let l;switch(Z.value){case"create":default:l=await u(B.value);break;case"update":l=await o(B.value)}0===l.code&&(C({type:"success",message:"创建/更改成功"}),ae(),P())}))};return(e,l)=>{const t=p("el-date-picker"),u=p("el-form-item"),o=p("el-input"),n=p("el-button"),r=p("el-form"),s=p("el-popover"),C=p("el-table-column"),D=p("el-table"),P=p("el-pagination"),ue=p("el-option"),oe=p("el-select"),ie=p("el-dialog");return m(),v("div",null,[c("div",z,[f(r,{inline:!0,model:G.value,class:"demo-form-inline"},{default:b((()=>[f(u,{label:"创建时间"},{default:b((()=>[f(t,{modelValue:G.value.startCreatedAt,"onUpdate:modelValue":l[0]||(l[0]=e=>G.value.startCreatedAt=e),type:"datetime",placeholder:"开始时间"},null,8,["modelValue"]),y(" — "),f(t,{modelValue:G.value.endCreatedAt,"onUpdate:modelValue":l[1]||(l[1]=e=>G.value.endCreatedAt=e),type:"datetime",placeholder:"结束时间"},null,8,["modelValue"])])),_:1}),f(u,{label:"昵称"},{default:b((()=>[f(o,{modelValue:G.value.nickname,"onUpdate:modelValue":l[2]||(l[2]=e=>G.value.nickname=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),f(u,{label:"联保代码"},{default:b((()=>[f(o,{modelValue:G.value.userNum,"onUpdate:modelValue":l[3]||(l[3]=e=>G.value.userNum=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),f(u,null,{default:b((()=>[f(n,{size:"small",type:"primary",icon:"search",onClick:J},{default:b((()=>[y("查询")])),_:1}),f(n,{size:"small",icon:"refresh",onClick:H},{default:b((()=>[y("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),c("div",N,[c("div",U,[f(n,{size:"small",type:"primary",icon:"plus",onClick:le},{default:b((()=>[y("新增")])),_:1}),f(s,{visible:X.value,"onUpdate:visible":l[6]||(l[6]=e=>X.value=e),placement:"top",width:"160"},{reference:b((()=>[f(n,{icon:"delete",size:"small",style:{"margin-left":"10px"},disabled:!Q.value.length,onClick:l[5]||(l[5]=e=>X.value=!0)},{default:b((()=>[y("删除")])),_:1},8,["disabled"])])),default:b((()=>[x,c("div",S,[f(n,{size:"small",type:"primary",link:"",onClick:l[4]||(l[4]=e=>X.value=!1)},{default:b((()=>[y("取消")])),_:1}),f(n,{size:"small",type:"primary",onClick:Y},{default:b((()=>[y("确定")])),_:1})])])),_:1},8,["visible"])]),f(D,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:E.value,"row-key":"ID",onSelectionChange:W},{default:b((()=>[f(C,{type:"selection",width:"55"}),f(C,{align:"left",label:"日期",width:"180"},{default:b((e=>[y(g(h(i)(e.row.CreatedAt)),1)])),_:1}),f(C,{align:"left",label:"昵称",prop:"nickname",width:"120"}),f(C,{align:"left",label:"头像",prop:"avatar",width:"120"}),f(C,{align:"left",label:"联保代码",prop:"userNum",width:"120"}),f(C,{align:"left",label:"小程序类型",prop:"miniType",width:"120"},{default:b((e=>[y(g(h(d)(e.row.miniType,A.value)),1)])),_:1}),f(C,{align:"left",label:"小程序标识",prop:"openid",width:"120"}),f(C,{align:"left",label:"手机号",prop:"phone",width:"120"}),f(C,{align:"left",label:"实名状态",prop:"realNameState",width:"120"},{default:b((e=>[y(g(h(d)(e.row.realNameState,I.value)),1)])),_:1}),f(C,{align:"left",label:"按钮组"},{default:b((e=>[f(n,{type:"primary",link:"",icon:"edit",size:"small",class:"table-button",onClick:l=>(async e=>{const l=await a({ID:e.ID});Z.value="update",0===l.code&&(B.value=l.data.reminiUser,ee.value=!0)})(e.row)},{default:b((()=>[y("变更")])),_:2},1032,["onClick"]),f(n,{type:"primary",link:"",icon:"delete",size:"small",onClick:l=>{return a=e.row,void k.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{$(a)}));var a}},{default:b((()=>[y("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),c("div",T,[f(P,{layout:"total, sizes, prev, pager, next, jumper","current-page":O.value,"page-size":q.value,"page-sizes":[10,30,50,100],total:R.value,onCurrentChange:L,onSizeChange:K},null,8,["current-page","page-size","total"])])]),f(ie,{modelValue:ee.value,"onUpdate:modelValue":l[14]||(l[14]=e=>ee.value=e),"before-close":ae,title:"弹窗操作"},{footer:b((()=>[c("div",j,[f(n,{size:"small",onClick:ae},{default:b((()=>[y("取 消")])),_:1}),f(n,{size:"small",type:"primary",onClick:te},{default:b((()=>[y("确 定")])),_:1})])])),default:b((()=>[f(r,{model:B.value,"label-position":"right",ref_key:"elFormRef",ref:M,rules:F,"label-width":"80px"},{default:b((()=>[f(u,{label:"昵称:",prop:"nickname"},{default:b((()=>[f(o,{modelValue:B.value.nickname,"onUpdate:modelValue":l[7]||(l[7]=e=>B.value.nickname=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(u,{label:"头像:",prop:"avatar"},{default:b((()=>[f(o,{modelValue:B.value.avatar,"onUpdate:modelValue":l[8]||(l[8]=e=>B.value.avatar=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(u,{label:"联保代码:",prop:"userNum"},{default:b((()=>[f(o,{modelValue:B.value.userNum,"onUpdate:modelValue":l[9]||(l[9]=e=>B.value.userNum=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(u,{label:"小程序类型:",prop:"miniType"},{default:b((()=>[f(oe,{modelValue:B.value.miniType,"onUpdate:modelValue":l[10]||(l[10]=e=>B.value.miniType=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:b((()=>[(m(!0),v(V,null,_(A.value,((e,l)=>(m(),w(ue,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(u,{label:"小程序标识:",prop:"openid"},{default:b((()=>[f(o,{modelValue:B.value.openid,"onUpdate:modelValue":l[11]||(l[11]=e=>B.value.openid=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(u,{label:"手机号:",prop:"phone"},{default:b((()=>[f(o,{modelValue:B.value.phone,"onUpdate:modelValue":l[12]||(l[12]=e=>B.value.phone=e),clearable:!0,placeholder:"请输入"},null,8,["modelValue"])])),_:1}),f(u,{label:"实名状态:",prop:"realNameState"},{default:b((()=>[f(oe,{modelValue:B.value.realNameState,"onUpdate:modelValue":l[13]||(l[13]=e=>B.value.realNameState=e),placeholder:"请选择",style:{width:"100%"},clearable:!0},{default:b((()=>[(m(!0),v(V,null,_(I.value,((e,l)=>(m(),w(ue,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{A as default};
